(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define("SophosicChat",[],t):"object"===typeof exports?exports["SophosicChat"]=t(require("vue")):e["SophosicChat"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(e=>(()=>{"use strict";var t={9630:(e,t,s)=>{s(3792),s(3362),s(9085),s(9391);var n=s(1642),a={id:"app"};function o(e,t,s,o,r,i){var c=(0,n.resolveComponent)("chat-widget");return(0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,[t[0]||(t[0]=(0,n.createElementVNode)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"},null,-1)),(0,n.createElementVNode)("div",a,[(0,n.createVNode)(c)])],64)}var r={id:"chat-widget-container",class:"chat-widget-root"};function i(e,t,s,a,o,i){var c=(0,n.resolveComponent)("ChatWidget");return(0,n.openBlock)(),(0,n.createElementBlock)("div",r,[(0,n.createVNode)(c,(0,n.normalizeProps)((0,n.guardReactiveProps)(e.config)),null,16)])}s(2762);var c={class:"preview-content"},l={class:"recent-chat-preview-text"},u={class:"recent-chat-preview-time"},d={class:"chat-window-inner"},h={class:"header-left"},m={class:"header-title-container"},p={class:"header-title"},g={class:"header-buttons"},v={key:0,class:"chat-home-screen"},w={class:"home-content-wrapper"},y={class:"previous-chats-section"},f={key:0,class:"chat-list"},k=["onClick"],S={class:"chat-item-content"},x={class:"chat-preview"},b={class:"chat-date"},C={key:1,class:"empty-chats-message"},E={class:"powered-by-section"},V={key:2,class:"conversation-container"},N={class:"messages-wrapper"},T={class:"message-content"},B=["title"],I=["innerHTML"],M=["disabled"],A=["disabled"],O={key:0,viewBox:"0 0 24 24"},D={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"};function L(e,t,s,a,o,r){var i,L,P=(0,n.resolveComponent)("service-status"),H=(0,n.resolveComponent)("system-status-page");return(0,n.openBlock)(),(0,n.createElementBlock)("div",{class:(0,n.normalizeClass)(["chat-widget",{"is-open":o.isChatOpen}])},[o.isChatOpen?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:1,class:"chat-window",style:(0,n.normalizeStyle)({backgroundColor:o.currentTheme.messages.background})},[(0,n.createElementVNode)("div",d,[(0,n.createElementVNode)("div",{class:"custom-header",style:(0,n.normalizeStyle)({backgroundColor:o.currentTheme.header.background,color:o.currentTheme.header.text})},[(0,n.createElementVNode)("div",h,[o.showHomeScreen?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"back-button",onClick:t[3]||(t[3]=function(e){return o.showStatusPage?(o.showStatusPage=!1,o.showHomeScreen=!0):o.messageList.length>0?r.goToHome():null}),title:"Back",type:"button"},t[20]||(t[20]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)]))),(0,n.createElementVNode)("div",m,[(0,n.createElementVNode)("span",p,(0,n.toDisplayString)(o.showStatusPage?"System Status":o.showHomeScreen?"Sophia":"You & Sophia"),1),!o.showStatusPage&&o.showHomeScreen?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"header-status-button",onClick:t[4]||(t[4]=function(){return r.showSystemStatus&&r.showSystemStatus.apply(r,arguments)})},[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["header-status-dot",o.systemStatus.status.toLowerCase()])},null,2)])):(0,n.createCommentVNode)("",!0)])]),(0,n.createElementVNode)("div",g,[o.showHomeScreen||o.showStatusPage?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"download-button",onClick:t[5]||(t[5]=function(){return r.downloadTranscript&&r.downloadTranscript.apply(r,arguments)}),title:"Download Chat"},t[21]||(t[21]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,n.createElementVNode)("polyline",{points:"7 10 12 15 17 10"}),(0,n.createElementVNode)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)]))),o.showHomeScreen||o.showStatusPage?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:1,class:"reset-button",onClick:t[6]||(t[6]=function(){return r.resetSession&&r.resetSession.apply(r,arguments)}),title:"Start New Chat"},t[22]||(t[22]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,n.createElementVNode)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)]))),(0,n.createElementVNode)("button",{class:"close-button",onClick:t[7]||(t[7]=function(){return r.closeChat&&r.closeChat.apply(r,arguments)}),title:"Close Chat"},t[23]||(t[23]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.createElementVNode)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))])],4),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["chat-container",{"keyboard-open":o.isKeyboardOpen}])},[o.showHomeScreen?((0,n.openBlock)(),(0,n.createElementBlock)("div",v,[(0,n.createElementVNode)("div",w,[t[30]||(t[30]=(0,n.createElementVNode)("h1",{class:"home-greeting"},"Hi!",-1)),t[31]||(t[31]=(0,n.createElementVNode)("h2",{class:"home-subtitle"},"How can we help?",-1)),(0,n.createElementVNode)("button",{class:"start-chat-button",onClick:t[8]||(t[8]=function(){return r.startNewChat&&r.startNewChat.apply(r,arguments)})},t[24]||(t[24]=[(0,n.createTextVNode)(" Start a new chat "),(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)])),(0,n.createVNode)(P,{ref:"serviceStatus",onStatusChanged:r.onStatusChanged},null,8,["onStatusChanged"]),(0,n.createElementVNode)("div",y,[t[26]||(t[26]=(0,n.createElementVNode)("h3",{class:"previous-chats-title"},"Recent Conversations",-1)),o.previousChats.length>0?((0,n.openBlock)(),(0,n.createElementBlock)("div",f,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(r.displayedChats,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.sessionId,class:"chat-item",onClick:function(t){return r.loadChat(e)}},[(0,n.createElementVNode)("div",S,[(0,n.createElementVNode)("div",x,(0,n.toDisplayString)(r.getChatPreview(e)),1),(0,n.createElementVNode)("div",b,(0,n.toDisplayString)(r.formatDate(e.timestamp)),1)]),t[25]||(t[25]=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M9 18l6-6-6-6"})],-1))],8,k)})),128)),o.previousChats.length>5&&!o.showAllChats?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:"show-more-button",onClick:t[9]||(t[9]=function(e){return o.showAllChats=!0})}," Show more ")):(0,n.createCommentVNode)("",!0)])):((0,n.openBlock)(),(0,n.createElementBlock)("div",C," Your recent chats will appear here. "))]),(0,n.createElementVNode)("div",E,[t[28]||(t[28]=(0,n.createElementVNode)("a",{href:"https://sophosic.ai",target:"_blank",rel:"noopener noreferrer",class:"powered-by-link"}," Powered by Sophosic ",-1)),t[29]||(t[29]=(0,n.createElementVNode)("span",{class:"separator"},"|",-1)),(0,n.createElementVNode)("button",{class:"system-status-link",onClick:t[10]||(t[10]=function(){return r.showSystemStatus&&r.showSystemStatus.apply(r,arguments)})},[t[27]||(t[27]=(0,n.createTextVNode)(" System Status ")),(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["status-dot",o.systemStatus.status.toLowerCase()])},null,2)])])])])):o.showStatusPage?((0,n.openBlock)(),(0,n.createBlock)(H,{key:1,services:(null===(L=o.serviceStatus)||void 0===L?void 0:L.services)||[],"overall-status":o.systemStatus,onBack:t[11]||(t[11]=function(e){o.showStatusPage=!1,o.showHomeScreen=!0})},null,8,["services","overall-status"])):((0,n.openBlock)(),(0,n.createElementBlock)("div",V,[(0,n.createElementVNode)("div",N,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.messageList,(function(e,s){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:s,class:(0,n.normalizeClass)(["message-item",["me"===e.author?"user-message":"bot-message",{"thread-start":r.isBotThreadStart(s),"has-thread":r.isBotThreadStart(s)&&r.hasFollowingBotMessage(s),"thread-middle":r.isBotThreadMiddle(s),"thread-end":r.isBotThreadEnd(s)}]])},[(0,n.createElementVNode)("div",T,["me"!==e.author?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["bot-avatar",{"hidden-avatar":r.isBotThreadMiddle(s)||r.isBotThreadEnd(s)}])},[t[32]||(t[32]=(0,n.createElementVNode)("span",null,"S",-1)),(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["avatar-status-indicator",o.systemStatus.status.toLowerCase()]),title:o.systemStatus.statusText},null,10,B)],2)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:"message-bubble",innerHTML:r.renderMarkdown(e.data.text)},null,8,I)])],2)})),128))])]))],2),o.showHomeScreen||o.showStatusPage?(0,n.createCommentVNode)("",!0):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["user-input",{"keyboard-open":o.isKeyboardOpen}]),style:(0,n.normalizeStyle)({backgroundColor:o.currentTheme.input.background})},[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["input-wrapper",{"bot-typing":"bot"===o.showTypingIndicator}]),onClick:t[17]||(t[17]=function(){return console.log("Typing status:",o.showTypingIndicator)})},[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=function(e){return o.newMessage=e}),placeholder:"Type a message...",onKeyup:t[13]||(t[13]=(0,n.withKeys)((function(){return r.sendMessage&&r.sendMessage.apply(r,arguments)}),["enter"])),onFocus:t[14]||(t[14]=function(){return r.handleInputFocus&&r.handleInputFocus.apply(r,arguments)}),onBlur:t[15]||(t[15]=function(){return r.handleInputBlur&&r.handleInputBlur.apply(r,arguments)}),style:(0,n.normalizeStyle)({color:o.currentTheme.input.text}),disabled:"bot"===o.showTypingIndicator},null,44,M),[[n.vModelText,o.newMessage]]),(0,n.createElementVNode)("button",{onClick:t[16]||(t[16]=function(){return r.sendMessage&&r.sendMessage.apply(r,arguments)}),class:(0,n.normalizeClass)({active:o.newMessage.trim().length>0}),disabled:"bot"===o.showTypingIndicator},["bot"===o.showTypingIndicator?((0,n.openBlock)(),(0,n.createElementBlock)("svg",O)):((0,n.openBlock)(),(0,n.createElementBlock)("svg",D,t[33]||(t[33]=[(0,n.createElementVNode)("path",{d:"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"},null,-1)])))],10,A)],2)],6))])],4)):((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"chat-launcher",onClick:t[2]||(t[2]=function(){return r.openChat&&r.openChat.apply(r,arguments)})},[o.previousChats.length>0&&r.getMostRecentChatSummary()&&!o.hidePreview?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:"recent-chat-preview",onClick:t[1]||(t[1]=(0,n.withModifiers)((function(){return r.resumeRecentChat&&r.resumeRecentChat.apply(r,arguments)}),["stop"]))},[(0,n.createElementVNode)("div",c,[(0,n.createElementVNode)("div",l,(0,n.toDisplayString)(r.getMostRecentChatSummary()),1),(0,n.createElementVNode)("div",u,(0,n.toDisplayString)(r.formatDate(null===(i=o.previousChats[0])||void 0===i?void 0:i.timestamp)),1)]),(0,n.createElementVNode)("button",{class:"preview-close-button",onClick:t[0]||(t[0]=(0,n.withModifiers)((function(e){return o.hidePreview=!0}),["stop"])),title:"Hide preview"},t[18]||(t[18]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,n.createElementVNode)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,n.createElementVNode)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))])):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["launcher-button","status-".concat(o.systemStatus.status.toLowerCase())]),style:(0,n.normalizeStyle)({backgroundColor:o.currentTheme.launcher.background,boxShadow:"0 0 20px ".concat(o.currentTheme.launcher.shadow)})},t[19]||(t[19]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"white",stroke:"none"},[(0,n.createElementVNode)("path",{d:"M12 21a9 9 0 1 0-9-9c0 1.488.36 2.891 1 4.127L3 21l4.873-1c1.236.64 2.64 1 4.127 1Z"})],-1)]),6)]))],2)}var P=s(9258),H=s(4048),R=s(388),z=s(9201),F=(s(6280),s(6918),s(8706),s(2008),s(113),s(8980),s(4346),s(8598),s(2062),s(4782),s(6910),s(9089),s(1688),s(739),s(3288),s(3110),s(9432),s(6099),s(7495),s(906),s(8781),s(7764),s(5440),s(375),s(8992),s(4520),s(2577),s(1454),s(2953),s(6031),s(3296),s(7208),s(8408),s(4603),s(7566),s(8721),s(23)),j=(s(2010),{key:0,class:"service-status"}),U={class:"status-summary"},K={class:"status-title"},W={class:"status-grid"},q={class:"status-icon"},$={class:"status-details"},_={class:"service-name"},Y=["href"],J={class:"status-text"};function Z(e,t,s,a,o,r){return"OK"!==r.overallStatus.status?((0,n.openBlock)(),(0,n.createElementBlock)("div",j,[(0,n.createElementVNode)("div",{class:"status-header",onClick:t[0]||(t[0]=function(e){return o.isExpanded=!o.isExpanded})},[(0,n.createElementVNode)("div",U,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["dot",r.overallStatus.status.toLowerCase()])},null,2),(0,n.createElementVNode)("h3",K,(0,n.toDisplayString)(o.isExpanded?"Service Status":r.getSummaryText()),1)]),(0,n.createElementVNode)("button",{class:(0,n.normalizeClass)(["expand-button",{"is-expanded":o.isExpanded}])},t[1]||(t[1]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("polyline",{points:"6 9 12 15 18 9"})],-1)]),2)]),(0,n.withDirectives)((0,n.createElementVNode)("div",W,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(o.services,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.name,class:"status-item"},[(0,n.createElementVNode)("div",q,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["dot",e.status.toLowerCase()])},null,2)]),(0,n.createElementVNode)("div",$,[(0,n.createElementVNode)("span",_,[(0,n.createTextVNode)((0,n.toDisplayString)(e.name)+" ",1),(0,n.createElementVNode)("a",{href:e.statusPageUrl,target:"_blank",rel:"noopener noreferrer",class:"status-link",title:"View detailed status"},t[2]||(t[2]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,n.createElementVNode)("polyline",{points:"15 3 21 3 21 9"}),(0,n.createElementVNode)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1)]),8,Y)]),(0,n.createElementVNode)("span",J,(0,n.toDisplayString)(e.statusText),1)])])})),128))],512),[[n.vShow,o.isExpanded]])])):(0,n.createCommentVNode)("",!0)}var G=s(3604);s(8431),s(5086),s(3215),s(7550);const Q={name:"ServiceStatus",data:function(){return{isExpanded:!1,services:[{name:"Primary AI Agent",status:"OK",statusText:"Operational",endpoint:"https://api.anthropic.com/v1/messages",model:"claude-3-5-sonnet-20241022",statusPageUrl:"https://status.anthropic.com/"},{name:"Knowledge Base",status:"OK",statusText:"Operational",components:[{name:"Vector Database",endpoint:"https://api.pinecone.io",namespace:"company-knowledgebase",statusPageUrl:"https://status.pinecone.io/"},{name:"Embeddings Service",endpoint:"https://api.openai.com/v1/embeddings",model:"text-embedding-ada-002",statusPageUrl:"https://status.openai.com/"},{name:"LLM Processing",endpoint:"https://api.groq.com/v1/chat/completions",model:"llama-3.3-70b-versatile",statusPageUrl:"https://groqstatus.com/",details:{contextLength:"128k",speed:"276 tokens/sec",pricing:{input:"$0.59/M tokens",output:"$0.79/M tokens"}}}],statusPageUrl:"https://status.pinecone.io/"},{name:"Sophosic Backend",status:"OK",statusText:"Operational",endpoint:"https://n8n.sophosic.ai",statusPageUrl:"https://status.render.com/"}],checkInterval:null}},methods:{checkServiceStatus:function(e){var t=this;return(0,R.A)((0,H.A)().mark((function s(){var n,a,o,r;return(0,H.A)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,"Knowledge Base"!==e.name){s.next=8;break}return s.next=4,Promise.all(e.components.map(function(){var e=(0,R.A)((0,H.A)().mark((function e(t){var s,n,a,o,r;return(0,H.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n="OK",a="Operational",e.t0=t.name,e.next="Vector Database"===e.t0?5:"Embeddings Service"===e.t0?7:"LLM Processing"===e.t0?9:11;break;case 5:return s="https://status.pinecone.io/api/v2/status.json",e.abrupt("break",11);case 7:return s="https://status.openai.com/api/v2/status.json",e.abrupt("break",11);case 9:return s="https://groqstatus.com/api/v2/status.json",e.abrupt("break",11);case 11:return e.prev=11,e.next=14,fetch(s);case 14:return o=e.sent,e.next=17,o.json();case 17:r=e.sent,"none"===r.status.indicator?(n="OK",a="Operational"):"minor"===r.status.indicator?(n="WARN",a="Degraded Performance"):(n="CRIT",a="Service Disruption"),e.next=26;break;case 21:e.prev=21,e.t1=e["catch"](11),console.error("Error checking ".concat(t.name," status:"),e.t1),n="WARN",a="Status Unknown";case 26:return e.abrupt("return",{status:n,statusText:a});case 27:case"end":return e.stop()}}),e,null,[[11,21]])})));return function(t){return e.apply(this,arguments)}}()));case 4:n=s.sent,n.some((function(e){return"CRIT"===e.status}))?(e.status="CRIT",e.statusText="Service Disruption"):n.some((function(e){return"WARN"===e.status}))?(e.status="WARN",e.statusText="Degraded Performance"):n.every((function(e){return"OK"===e.status}))?(e.status="OK",e.statusText="Operational"):(e.status="WARN",e.statusText="Partially Operational"),s.next=23;break;case 8:s.t0=e.name,s.next="Primary AI Agent"===s.t0?11:"Sophosic Backend"===s.t0?13:15;break;case 11:return a="https://status.anthropic.com/api/v2/status.json",s.abrupt("break",15);case 13:return a="https://status.render.com/api/v2/status.json",s.abrupt("break",15);case 15:if(!a){s.next=23;break}return s.next=18,fetch(a);case 18:return o=s.sent,s.next=21,o.json();case 21:r=s.sent,t.updateServiceStatus(e,r);case 23:s.next=30;break;case 25:s.prev=25,s.t1=s["catch"](0),console.error("Error checking ".concat(e.name," status:"),s.t1),e.status="WARN",e.statusText="Status Unknown";case 30:case"end":return s.stop()}}),s,null,[[0,25]])})))()},updateServiceStatus:function(e,t){"none"===t.status.indicator?(e.status="OK",e.statusText="Operational"):"minor"===t.status.indicator?(e.status="WARN",e.statusText="Degraded Performance"):(e.status="CRIT",e.statusText="Service Disruption")},checkAllServices:function(){var e=this;return(0,R.A)((0,H.A)().mark((function t(){var s,n,a;return(0,H.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=(0,G.A)(e.services),t.prev=1,s.s();case 3:if((n=s.n()).done){t.next=9;break}return a=n.value,t.next=7,e.checkServiceStatus(a);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),s.e(t.t0);case 14:return t.prev=14,s.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))()},getSummaryText:function(){return"OK"===this.overallStatus.status?"All Systems Operational":"WARN"===this.overallStatus.status?"Degraded Performance":"CRIT"===this.overallStatus.status?"Service Disruption":"Checking System Status..."}},mounted:function(){var e=this;this.checkAllServices(),this.checkInterval=setInterval((function(){e.checkAllServices()}),3e5)},beforeUnmount:function(){this.checkInterval&&clearInterval(this.checkInterval)},computed:{overallStatus:function(){return this.services.some((function(e){return"CRIT"===e.status}))?{status:"CRIT",statusText:"Service Disruption"}:this.services.some((function(e){return"WARN"===e.status}))?{status:"WARN",statusText:"Degraded Performance"}:this.services.every((function(e){return"OK"===e.status}))?{status:"OK",statusText:"Operational"}:{status:"WARN",statusText:"Partially Operational"}}},watch:{overallStatus:{handler:function(e){this.$emit("status-changed",e)},deep:!0}}};var X=s(6262);const ee=(0,X.A)(Q,[["render",Z]]),te=ee;var se={class:"chat-container"},ne={class:"system-status-content"},ae={class:"status-card"},oe={class:"services-grid"},re={class:"status-icon"},ie={class:"status-details"},ce={class:"service-header"},le={class:"service-title"},ue={class:"service-name"},de=["onClick"],he=["href"],me={class:"status-text"},pe={class:"component-header"},ge={class:"component-name"},ve=["href"],we={class:"component-details"},ye={class:"component-model"};function fe(e,t,s,a,o,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",se,[(0,n.createElementVNode)("div",ne,[(0,n.createElementVNode)("div",ae,[(0,n.createElementVNode)("div",{class:(0,n.normalizeClass)(["overall-status",s.overallStatus.status.toLowerCase()])},[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["dot",s.overallStatus.status.toLowerCase()])},null,2),(0,n.createElementVNode)("h2",null,(0,n.toDisplayString)(r.getSummaryText()),1)],2),(0,n.createElementVNode)("div",oe,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(s.services,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.name,class:"status-item"},[(0,n.createElementVNode)("div",re,[(0,n.createElementVNode)("span",{class:(0,n.normalizeClass)(["dot",e.status.toLowerCase()])},null,2)]),(0,n.createElementVNode)("div",ie,[(0,n.createElementVNode)("div",ce,[(0,n.createElementVNode)("div",le,[(0,n.createElementVNode)("span",ue,(0,n.toDisplayString)(e.name),1)]),e.components?((0,n.openBlock)(),(0,n.createElementBlock)("button",{key:0,class:(0,n.normalizeClass)(["status-link expand-button",{"is-expanded":o.expandedServices[e.name]}]),onClick:function(t){return r.toggleService(e.name)},title:"View components"},t[0]||(t[0]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("polyline",{points:"6 9 12 15 18 9"})],-1)]),10,de)):((0,n.openBlock)(),(0,n.createElementBlock)("a",{key:1,href:e.statusPageUrl,target:"_blank",rel:"noopener noreferrer",class:"status-link",title:"View detailed status"},t[1]||(t[1]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,n.createElementVNode)("polyline",{points:"15 3 21 3 21 9"}),(0,n.createElementVNode)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1)]),8,he))]),(0,n.createElementVNode)("span",me,(0,n.toDisplayString)(e.statusText),1),e.components?((0,n.openBlock)(),(0,n.createElementBlock)("div",{key:0,class:(0,n.normalizeClass)(["service-components",{expanded:o.expandedServices[e.name]}])},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.components,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("div",{key:e.name,class:"component-item"},[(0,n.createElementVNode)("div",pe,[(0,n.createElementVNode)("span",ge,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)("a",{href:e.statusPageUrl,target:"_blank",rel:"noopener noreferrer",class:"status-link",title:"View provider status"},t[2]||(t[2]=[(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,n.createElementVNode)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,n.createElementVNode)("polyline",{points:"15 3 21 3 21 9"}),(0,n.createElementVNode)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1)]),8,ve)]),(0,n.createElementVNode)("div",we,[(0,n.createElementVNode)("span",ye,(0,n.toDisplayString)(e.model||e.namespace),1)])])})),128))],2)):(0,n.createCommentVNode)("",!0)])])})),128))])]),t[3]||(t[3]=(0,n.createElementVNode)("div",{class:"powered-by-section"},[(0,n.createElementVNode)("a",{href:"https://sophosic.ai",target:"_blank",rel:"noopener noreferrer",class:"powered-by-link"}," Powered by Sophosic ")],-1))])])}const ke={name:"SystemStatusPage",props:{services:{type:Array,required:!0},overallStatus:{type:Object,required:!0}},data:function(){return{expandedServices:{}}},methods:{getSummaryText:function(){return"OK"===this.overallStatus.status?"All Systems Operational":"WARN"===this.overallStatus.status?"Degraded Performance":"CRIT"===this.overallStatus.status?"Service Disruption":"Checking System Status..."},toggleService:function(e){this.expandedServices[e]=!this.expandedServices[e],this.$forceUpdate()}}},Se=(0,X.A)(ke,[["render",fe],["__scopeId","data-v-3826e6aa"]]),xe=Se;var be={primary:"#5423E7",secondary:"#1E1B3C",background:"#F8F9FE",white:"#FFFFFF",gray:{100:"#F8F9FE",200:"#EEF0F6",300:"#E2E4ED",400:"#9CA3AF",500:"#6B7280",600:"#4B5563",700:"#374151",800:"#1E1B3C"},status:{success:"#10B981",warning:"#F59E0B",error:"#EF4444"}},Ce={header:{background:be.secondary,text:be.white,icons:be.white,buttons:{background:"rgba(255, 255, 255, 0.1)",hover:"rgba(255, 255, 255, 0.2)"}},launcher:{background:be.primary,shadow:"rgba(84, 35, 231, 0.1)"},messages:{background:be.background,user:{background:be.primary,text:be.white},bot:{background:be.white,text:be.secondary},timestamp:be.gray[500]},input:{background:be.background,text:be.secondary,placeholder:be.gray[500],border:be.gray[300],button:{default:be.gray[400],active:be.primary}},preview:{background:be.white,text:be.secondary,timestamp:be.gray[500],shadow:"rgba(0, 0, 0, 0.1)"},status:{ok:be.status.success,warn:be.status.warning,crit:be.status.error}};var Ee="https://n8n.sophosic.ai/webhook/e60704a9-52c1-47eb-9037-2344d6b56c21/chat",Ve=function(e,t){0},Ne={name:"ChatWidget",components:{ServiceStatus:te,SystemStatusPage:xe},props:{theme:{type:Object,default:function(){return{}}}},data:function(){return{sessionId:"",participants:[{id:"bot",name:"Sophia",imageUrl:"data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent('\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">\n              <circle cx="15" cy="15" r="15" fill="#5423E7"/>\n              <text x="15" y="20" \n                font-family="Arial, sans-serif" \n                font-size="16"\n                fill="white" \n                text-anchor="middle"\n                style="pointer-events: none;">S</text>\n            </svg>\n          '))}],apiUrl:Ee,messageList:[],newMessagesCount:0,isChatOpen:!1,showTypingIndicator:"",newMessage:"",currentTheme:Ce,showHomeScreen:!0,previousChats:[],showAllChats:!1,systemStatus:{status:"OK",statusText:"Operational"},isStatusHovered:!1,showStatusPage:!1,serviceStatus:null,chatSummary:"",isKeyboardOpen:!1,viewportHeight:window.innerHeight,isMobileDevice:!1,hidePreview:!1}},computed:{displayedChats:function(){return this.showAllChats?this.previousChats:this.previousChats.slice(0,5)},isBotTyping:function(){return"bot"===this.showTypingIndicator}},created:function(){this.currentTheme=(0,z.A)((0,z.A)({},Ce),this.theme),this.loadSession(),this.loadPreviousChats()},mounted:function(){var e=this;return(0,R.A)((0,H.A)().mark((function t(){var s,n,a,o;return(0,H.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.messageList.length>0)){t.next=18;break}return t.prev=1,t.next=4,fetch(Ee,{method:"GET",headers:{Accept:"application/json"},credentials:"omit"});case 4:if(s=t.sent,s.ok){t.next=7;break}throw new Error("HTTP error: ".concat(s.status));case 7:return t.next=9,s.text();case 9:n=t.sent,console.log("Initial raw response:",n),a=e.extractMessage(n),a&&"I'm here to help! How can I assist you today? (error)"!==a&&e.addMessage({author:"bot",type:"text",data:{text:a}}),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),console.error("Error loading initial message:",t.t0);case 18:e.$nextTick((function(){e.$refs.serviceStatus&&(e.serviceStatus=e.$refs.serviceStatus)})),e.isMobileDevice=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e.isMobileDevice&&(window.addEventListener("resize",e.handleViewportResize),"visualViewport"in window&&window.visualViewport.addEventListener("resize",e.handleViewportResize),o=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},o(),window.addEventListener("resize",o),"visualViewport"in window&&window.visualViewport.addEventListener("resize",(function(){var t=window.visualViewport;document.documentElement.style.setProperty("--keyboard-height","".concat(window.innerHeight-t.height,"px")),e.scrollToBottom()})));case 21:case"end":return t.stop()}}),t,null,[[1,15]])})))()},beforeUnmount:function(){window.removeEventListener("resize",this.handleViewportResize),"visualViewport"in window&&window.visualViewport.removeEventListener("resize",this.handleViewportResize)},methods:{loadSession:function(){var e=localStorage.getItem("chatSessionId");e?this.sessionId=e:this.createNewSession()},createNewSession:function(){this.sessionId="session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("chatSessionId",this.sessionId)},resetSession:function(){this.archiveSession(),this.messageList=[],this.createNewSession(),this.addMessage({author:"bot",type:"text",data:{text:"ðŸ‘‹ Hi! I'm Sophia, an AI agent here with Valley Connection. How can I help you today?"}})},onMessageWasSent:function(e){var t=this;return(0,R.A)((0,H.A)().mark((function s(){var n,a,o,r,i,c,l,u,d;return(0,H.A)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.showTypingIndicator="bot",t.addMessage({author:"me",type:"text",data:{text:e.data.text},timestamp:(new Date).toISOString()}),s.prev=2,console.log("Sending message:",e.data.text),a=JSON.stringify({message:e.data.text,type:"user_message",timestamp:(new Date).toISOString(),metadata:{sessionId:t.sessionId}}),s.next=7,fetch(t.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"omit",body:a});case 7:if(o=s.sent,o.ok){s.next=10;break}throw new Error("HTTP error! status: ".concat(o.status));case 10:return s.next=12,o.json();case 12:if(r=s.sent,console.log("Raw response data:",r),i=Array.isArray(r)?null===(n=r.find((function(e){return e.conversationSummary})))||void 0===n?void 0:n.conversationSummary:r.conversationSummary||"Chat session",console.log("Extracted conversation summary:",i),"Chat session"===i&&console.warn("No conversation summary found in response:",r),c=t.extractMessage(r),!(c.messages.length>0)){s.next=23;break}return l={author:"bot",type:"text",data:{text:c.messages[0]},summary:i,timestamp:(new Date).toISOString()},console.log("Adding message with summary:",l),s.next=23,t.addMessage(l);case 23:if(!(c.messages.length>1)){s.next=33;break}u=1;case 25:if(!(u<c.messages.length)){s.next=33;break}return s.next=28,new Promise((function(e){return setTimeout(e,1e3)}));case 28:return s.next=30,t.addMessage({author:"bot",type:"text",data:{text:c.messages[u]},summary:i,timestamp:(new Date).toISOString()});case 30:u++,s.next=25;break;case 33:d=t.previousChats.find((function(e){return e.sessionId===t.sessionId})),d&&(d.summary=i,t.savePreviousChats()),s.next=41;break;case 37:s.prev=37,s.t0=s["catch"](2),Ve(s.t0,"Message sending failed"),t.addMessage({author:"bot",type:"text",data:{text:"I'm sorry, I'm having trouble connecting. Please try again."}});case 41:return s.prev=41,t.showTypingIndicator="",s.finish(41);case 44:case"end":return s.stop()}}),s,null,[[2,37,41,44]])})))()},extractMessage:function(e){try{var t="";if(Array.isArray(e)){var s=e.find((function(e){return e.agentResponse}));t=(null===s||void 0===s?void 0:s.agentResponse)||"I'm here to help! How can I assist you today? (error)"}else t=e.agentResponse?e.agentResponse:"I'm here to help! How can I assist you today? (error)";var n=t.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0})).map((function(e){return e.replace(/\\n/g,"")}));return{messages:n}}catch(a){return console.error("Error extracting message:",a),{messages:["I'm here to help! How can I assist you today? (error)"]}}},addMessage:function(e){if(!e.timestamp){var t=new Date,s=-420,n=new Date(t.getTime()+6e4*(t.getTimezoneOffset()+s));e.timestamp=n.toISOString()}console.log("Adding message:",e),this.messageList=[].concat((0,P.A)(this.messageList),[e]),this.$nextTick((function(){var e=document.querySelector(".conversation-container");e&&(e.scrollTop=e.scrollHeight)})),this.archiveSession()},openChat:function(){this.isChatOpen=!0,this.showHomeScreen=!0,this.newMessagesCount=0,this.loadPreviousChats()},closeChat:function(){this.archiveSession(),this.isChatOpen=!1},handleOnType:function(){console.log("User is typing...")},downloadTranscript:function(){var e=this.messageList.map((function(e){var t="me"===e.author?"You":"Sophia",s=e.timestamp?new Date(e.timestamp).toLocaleString("en-US",{timeZone:"America/Phoenix",hour12:!0,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):(new Date).toLocaleString("en-US",{timeZone:"America/Phoenix"});return"".concat(s," - ").concat(t,": ").concat(e.data.text)})).join("\n\n"),t="Chat Transcript with Sophia\n"+"Generated on: ".concat((new Date).toLocaleString(),"\n")+"Session ID: ".concat(this.sessionId,"\n\n")+"".concat(e),s=new Blob([t],{type:"text/plain"}),n=window.URL.createObjectURL(s),a=document.createElement("a");a.href=n,a.download="chat-transcript-".concat((new Date).toISOString().slice(0,10),".txt"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(n),document.body.removeChild(a)},startNewChat:function(){var e=this;this.messageList=[],this.createNewSession(),this.addMessage({author:"bot",type:"text",data:{text:"ðŸ‘‹ Hi! I'm Sophia, an AI agent here with **Valley Connection AZ**. I can help you with:\n\n- Information about our business networking community\n- Details about our upcoming events and mastermind groups\n- Membership benefits and opportunities\n- Education & training programs like Real Estate Mastery\n- Locations of our meetings in Phoenix, Gilbert, Queen Creek, and other Valley areas\n- How to get involved with our thriving business community"},isWelcomeMessage:!0}),this.$nextTick((function(){e.addMessage({author:"bot",type:"text",data:{text:"How can I assist you today?"},isWelcomeMessage:!0,isThreaded:!0})})),this.$nextTick((function(){e.showHomeScreen=!1}))},goToHome:function(){this.archiveSession(),this.loadPreviousChats(),this.messageList=[],this.isChatOpen=!0,this.showHomeScreen=!0,this.showAllChats=!1},loadPreviousChats:function(){var e=localStorage.getItem("previousChats");if(e)try{this.previousChats=JSON.parse(e),this.previousChats.sort((function(e,t){var s=e.messages[e.messages.length-1],n=t.messages[t.messages.length-1];return new Date((null===n||void 0===n?void 0:n.timestamp)||t.timestamp)-new Date((null===s||void 0===s?void 0:s.timestamp)||e.timestamp)})),console.log("Loaded recent conversations:",this.previousChats)}catch(t){console.error("Error loading recent conversations:",t),this.previousChats=[]}},savePreviousChats:function(){this.previousChats=this.previousChats.sort((function(e,t){var s=e.messages[e.messages.length-1],n=t.messages[t.messages.length-1];return new Date((null===n||void 0===n?void 0:n.timestamp)||t.timestamp)-new Date((null===s||void 0===s?void 0:s.timestamp)||e.timestamp)})).slice(0,10),localStorage.setItem("previousChats",JSON.stringify(this.previousChats)),console.log("Saved recent conversations:",this.previousChats)},loadChat:function(e){this.showHomeScreen=!1,console.log("Loading chat:",e),this.sessionId=e.sessionId,this.messageList=(0,P.A)(e.messages),this.isChatOpen=!0,this.$nextTick((function(){var e=document.querySelector(".conversation-container");e&&(e.scrollTop=e.scrollHeight)}))},getChatPreview:function(e){var t;if(e.summary&&"Chat session"!==e.summary)return e.summary.length>50?e.summary.substring(0,50)+"...":e.summary;var s=e.messages.find((function(e){return!e.isWelcomeMessage})),n=(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.text)||"New chat";return n.length>50?n.substring(0,50)+"...":n},formatDate:function(e){var t=new Date(e),s=new Date,n=s-t,a=Math.floor(n/864e5),o=Math.floor(n/36e5),r=Math.floor(n/6e4),i=t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});if(r<1)return"Just now";if(o<1)return"".concat(r,"m ago");if(a<1)return"".concat(o,"h ago");if(t.toDateString()===s.toDateString())return"Today at ".concat(i);var c=new Date(s);return c.setDate(c.getDate()-1),t.toDateString()===c.toDateString()?"Yesterday at ".concat(i):a<7?t.toLocaleDateString("en-US",{weekday:"long"}):t.getFullYear()===s.getFullYear()?t.toLocaleDateString("en-US",{month:"short",day:"numeric"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},archiveSession:function(){var e=this;if(this.messageList.length>0){var t=this.messageList.filter((function(e){return"bot"===e.author&&e.summary&&"Chat session"!==e.summary&&!e.isWelcomeMessage})),s="Chat session";if(t.length>0)s=t[t.length-1].summary;else{var n=this.messageList.find((function(e){return!e.isWelcomeMessage}));n&&(s=n.data.text.substring(0,50))}var a=this.messageList[this.messageList.length-1],o=(null===a||void 0===a?void 0:a.timestamp)||(new Date).toISOString(),r=this.previousChats.findIndex((function(t){return t.sessionId===e.sessionId})),i={sessionId:this.sessionId,messages:this.messageList,timestamp:o,summary:s};-1!==r?this.previousChats[r]=i:this.previousChats=[i].concat((0,P.A)(this.previousChats)),this.savePreviousChats(),console.log("Archived chat with summary:",s,"timestamp:",o)}},sendMessage:function(){if(this.newMessage.trim()){var e={data:{text:this.newMessage.trim()}};this.newMessage="",this.onMessageWasSent(e)}},renderMarkdown:function(e){try{var t=e.replace(/\\n/g,"\n").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&quot;/g,'"').trim();return F.xI.setOptions({breaks:!0,sanitize:!1,gfm:!0}),(0,F.xI)(t)}catch(s){return console.error("Markdown rendering error:",s),e}},isBotThreadStart:function(e){return"me"!==this.messageList[e].author&&(0===e||"me"===this.messageList[e-1].author)},isBotThreadMiddle:function(e){return"me"!==this.messageList[e].author&&e>0&&e<this.messageList.length-1&&"me"!==this.messageList[e-1].author&&"me"!==this.messageList[e+1].author},isBotThreadEnd:function(e){return"me"!==this.messageList[e].author&&(e===this.messageList.length-1||"me"===this.messageList[e+1].author)&&e>0&&"me"!==this.messageList[e-1].author},onStatusChanged:function(e){this.systemStatus=e},showSystemStatus:function(){this.serviceStatus=this.$refs.serviceStatus,this.serviceStatus?(this.showStatusPage=!0,this.showHomeScreen=!1):console.error("ServiceStatus component not found")},getSummaryText:function(){return"OK"===this.systemStatus.status?"All Systems Operational":"WARN"===this.systemStatus.status?"Degraded Performance":"CRIT"===this.systemStatus.status?"Service Disruption":"Checking Status..."},handleInputFocus:function(){this.isMobileDevice&&(this.isKeyboardOpen=!0,this.$nextTick((function(){var e=document.querySelector(".messages-wrapper");if(e){var t=e.querySelectorAll(".message-item");if(t.length<=3)window.scrollTo(0,0);else{var s=t[t.length-1];s.scrollIntoView({behavior:"smooth"})}}})))},handleInputBlur:function(){this.isMobileDevice&&(this.isKeyboardOpen=!1)},handleViewportResize:function(){var e;if(this.isMobileDevice){var t=(null===(e=window.visualViewport)||void 0===e?void 0:e.height)||window.innerHeight,s=this.viewportHeight-t;if(t<this.viewportHeight){this.isKeyboardOpen=!0,document.documentElement.style.setProperty("--keyboard-height","".concat(s,"px"));var n=document.querySelectorAll(".message-item");n.length<=3&&window.scrollTo(0,0)}else this.isKeyboardOpen=!1,document.documentElement.style.setProperty("--keyboard-height","0px");this.viewportHeight=t}},scrollToBottom:function(){this.$nextTick((function(){var e=document.querySelector(".conversation-container");e&&(e.scrollTop=e.scrollHeight)}))},getMostRecentChatPreview:function(){return this.getMostRecentChatSummary()},resumeRecentChat:function(){if(0!==this.previousChats.length){var e=this.previousChats[0];this.loadChat(e),this.isChatOpen=!0,this.showHomeScreen=!1}},getMostRecentChatSummary:function(){if(0===this.previousChats.length)return"";var e=this.previousChats[0];return e.summary?e.summary:"New chat"},hasFollowingBotMessage:function(e){return e<this.messageList.length-1&&"me"!==this.messageList[e+1].author}}},Te=function(){(0,n.useCssVars)((function(e){return{"25be867c":e.currentTheme.primary,"256c9924":e.currentTheme.secondary,"30fc7c8a":e.currentTheme.messages.background,"76db0f29":e.currentTheme.header.background,"14c25130":e.currentTheme.header.text,d6f18e94:e.currentTheme.header.buttons.background,"62de5e98":e.currentTheme.header.buttons.hover,"6efe4556":e.currentTheme.messages.user.background,"9ad492d8":e.currentTheme.messages.user.text,ae2105de:e.currentTheme.messages.bot.background,99145960:e.currentTheme.messages.bot.text,b756b38c:e.currentTheme.messages.timestamp,fa4aaad0:e.currentTheme.input.background,"1ad11bd2":e.currentTheme.input.text,cc9e456e:e.currentTheme.input.placeholder,e753e2d4:e.currentTheme.input.border,accf6822:e.currentTheme.input.button["default"],"298e9b98":e.currentTheme.input.button.active,"25213a5a":e.currentTheme.preview.background,"31ed7b59":e.currentTheme.preview.text,"868e232c":e.currentTheme.preview.timestamp,"6ae6d44c":e.currentTheme.preview.shadow}}))},Be=Ne.setup;Ne.setup=Be?function(e,t){return Te(),Be(e,t)}:Te;const Ie=Ne,Me=(0,X.A)(Ie,[["render",L]]),Ae=Me,Oe=(0,n.defineComponent)({name:"ChatWidgetIndex",components:{ChatWidget:Ae},props:{config:{type:Object,default:function(){return{}}}}}),De=(0,X.A)(Oe,[["render",i]]),Le=De,Pe={name:"App",components:{ChatWidget:Le}},He=(0,X.A)(Pe,[["render",o]]),Re=He;var ze=(0,n.createApp)(Re);ze.mount("#app")},1642:t=>{t.exports=e}},s={};function n(e){var a=s[e];if(void 0!==a)return a.exports;var o=s[e]={exports:{}};return t[e].call(o.exports,o,o.exports,n),o.exports}n.m=t,(()=>{var e=[];n.O=(t,s,a,o)=>{if(!s){var r=1/0;for(u=0;u<e.length;u++){for(var[s,a,o]=e[u],i=!0,c=0;c<s.length;c++)(!1&o||r>=o)&&Object.keys(n.O).every((e=>n.O[e](s[c])))?s.splice(c--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,a,o]}})(),(()=>{n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.j=524})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var a,o,[r,i,c]=s,l=0;if(r.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var u=c(n)}for(t&&t(s);l<r.length;l++)o=r[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},s=Object("undefined"!==typeof self?self:this)["webpackChunkSophosicChat"]=Object("undefined"!==typeof self?self:this)["webpackChunkSophosicChat"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=n.O(void 0,[504],(()=>n(9630)));return a=n.O(a),a=a["default"].mount,a})()));
//# sourceMappingURL=app.js.map