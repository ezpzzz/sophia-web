{"version":3,"file":"js/app.js","mappings":"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","sources":["webpack://SophosicChat/webpack/universalModuleDefinition","webpack://SophosicChat/./demo/src/App.vue","webpack://SophosicChat/./src/components/ChatWidget/index.vue","webpack://SophosicChat/./src/components/ChatWidget/ChatWidget.vue","webpack://SophosicChat/./src/components/ChatWidget/ServiceStatus.vue","webpack://SophosicChat/./src/components/ChatWidget/ServiceStatus.vue?534f","webpack://SophosicChat/./src/components/ChatWidget/SystemStatusPage.vue","webpack://SophosicChat/./src/components/ChatWidget/SystemStatusPage.vue?4098","webpack://SophosicChat/./src/components/ChatWidget/theme.js","webpack://SophosicChat/./src/components/ChatWidget/ChatWidget.vue?0a00","webpack://SophosicChat/./src/components/ChatWidget/index.vue?91d8","webpack://SophosicChat/./demo/src/App.vue?03e1","webpack://SophosicChat/./demo/src/main.js","webpack://SophosicChat/webpack/bootstrap","webpack://SophosicChat/webpack/runtime/chunk loaded","webpack://SophosicChat/webpack/runtime/compat get default export","webpack://SophosicChat/webpack/runtime/define property getters","webpack://SophosicChat/webpack/runtime/global","webpack://SophosicChat/webpack/runtime/hasOwnProperty shorthand","webpack://SophosicChat/webpack/runtime/runtimeId","webpack://SophosicChat/webpack/runtime/jsonp chunk loading","webpack://SophosicChat/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SophosicChat\"] = factory();\n\telse\n\t\troot[\"SophosicChat\"] = factory();\n})(typeof self !== 'undefined' ? self : this, () => {\nreturn ","<template>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n  <div id=\"app\">\n    <chat-widget />\n  </div>\n</template>\n\n<script>\nimport ChatWidget from '../../src/components/ChatWidget'\n\nexport default {\n  name: 'App',\n  components: {\n    ChatWidget\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Work Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin: 60px;\n}\n</style>\n","<template>\n  <div id=\"chat-widget-container\"></div>\n</template>\n\n<script>\nimport ChatWidget from './ChatWidget.vue'\nimport './styles.css'\n\n// Export the component directly\nconst component = {\n  name: 'ChatWidgetIndex',\n  extends: ChatWidget,\n  mounted() {\n    // Initialize any required setup\n    this.initializeChat()\n  },\n  methods: {\n    initializeChat() {\n      // Add any initialization logic here\n      console.log('Chat widget mounted')\n    }\n  }\n}\n\nexport { component as default }\n</script> ","/* eslint-disable no-console */\n<template>\n  <div \n    class=\"chat-widget\"\n    :class=\"{ 'is-open': isChatOpen }\"\n  >\n    <!-- Chat Launcher -->\n    <div \n      v-if=\"!isChatOpen\" \n      class=\"chat-launcher\"\n      @click=\"openChat\"\n    >\n      <!-- Recent Chat Preview -->\n      <div \n        v-if=\"previousChats.length > 0 && getMostRecentChatSummary() && !hidePreview\"\n        class=\"recent-chat-preview\"\n        @click.stop=\"resumeRecentChat\"\n      >\n        <div class=\"preview-content\">\n          <div class=\"recent-chat-preview-text\">\n            {{ getMostRecentChatSummary() }}\n          </div>\n          <div class=\"recent-chat-preview-time\">\n            {{ formatDate(previousChats[0]?.timestamp) }}\n          </div>\n        </div>\n        <button \n          class=\"preview-close-button\" \n          @click.stop=\"hidePreview = true\"\n          title=\"Hide preview\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n          </svg>\n        </button>\n      </div>\n\n      <div \n        class=\"launcher-button\" \n        :class=\"`status-${systemStatus.status.toLowerCase()}`\"\n        :style=\"{ backgroundColor: currentTheme.launcher.background, boxShadow: `0 0 20px ${currentTheme.launcher.shadow}` }\"\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"white\" stroke=\"none\">\n          <path d=\"M12 21a9 9 0 1 0-9-9c0 1.488.36 2.891 1 4.127L3 21l4.873-1c1.236.64 2.64 1 4.127 1Z\" />\n        </svg>\n      </div>\n    </div>\n\n    <!-- Chat Window -->\n    <div v-else class=\"chat-window\" :style=\"{ backgroundColor: currentTheme.messages.background }\">\n      <!-- Add a wrapper div for better mobile viewport handling -->\n      <div class=\"chat-window-inner\">\n        <!-- Custom header slot -->\n        <div class=\"custom-header\" :style=\"{ backgroundColor: currentTheme.header.background, color: currentTheme.header.text }\">\n          <div class=\"header-left\">\n            <button class=\"back-button\" \n                    v-if=\"!showHomeScreen\"\n                    @click=\"showStatusPage ? (showStatusPage = false, showHomeScreen = true) : (messageList.length > 0 ? goToHome() : null)\" \n                    title=\"Back\"\n                    type=\"button\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M19 12H5M12 19l-7-7 7-7\"/>\n              </svg>\n            </button>\n            <div class=\"header-title-container\">\n              <span class=\"header-title\">\n                {{ showStatusPage ? 'System Status' : (showHomeScreen ? 'Sophia' : 'You & Sophia') }}\n              </span>\n              <button v-if=\"!showStatusPage && showHomeScreen\" \n                      class=\"header-status-button\" \n                      @click=\"showSystemStatus\">\n                <div class=\"header-status-dot\" :class=\"systemStatus.status.toLowerCase()\"></div>\n              </button>\n            </div>\n          </div>\n          <div class=\"header-buttons\">\n            <button v-if=\"!showHomeScreen && !showStatusPage\" \n                    class=\"download-button\" \n                    @click=\"downloadTranscript\" \n                    title=\"Download Chat\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                <polyline points=\"7 10 12 15 17 10\"></polyline>\n                <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n              </svg>\n            </button>\n            <button v-if=\"!showHomeScreen && !showStatusPage\" \n                    class=\"reset-button\" \n                    @click=\"resetSession\" \n                    title=\"Start New Chat\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n              </svg>\n            </button>\n            <button class=\"close-button\" @click=\"closeChat\" title=\"Close Chat\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <!-- Message list slot -->\n        <div class=\"chat-container\" :class=\"{ 'keyboard-open': isKeyboardOpen }\">\n          <!-- Home Screen -->\n          <div v-if=\"showHomeScreen\" class=\"chat-home-screen\">\n            <div class=\"home-content-wrapper\">\n              <h1 class=\"home-greeting\">Hi!</h1>\n              <h2 class=\"home-subtitle\">How can we help?</h2>\n              \n              <!-- Start chat button -->\n              <button class=\"start-chat-button\" @click=\"startNewChat\">\n                Start a new chat\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <path d=\"M5 12h14M12 5l7 7-7 7\"/>\n                </svg>\n              </button>\n\n              <service-status \n                ref=\"serviceStatus\"\n                @status-changed=\"onStatusChanged\" \n              />\n              \n              <!-- Previous Chats Section -->\n              <div class=\"previous-chats-section\">\n                <h3 class=\"previous-chats-title\">Recent Conversations</h3>\n                <div v-if=\"previousChats.length > 0\" class=\"chat-list\">\n                  <div v-for=\"chat in displayedChats\" \n                       :key=\"chat.sessionId\" \n                       class=\"chat-item\"\n                       @click=\"loadChat(chat)\">\n                    <div class=\"chat-item-content\">\n                      <div class=\"chat-preview\">{{ getChatPreview(chat) }}</div>\n                      <div class=\"chat-date\">{{ formatDate(chat.timestamp) }}</div>\n                    </div>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                      <path d=\"M9 18l6-6-6-6\"/>\n                    </svg>\n                  </div>\n                  <button \n                    v-if=\"previousChats.length > 5 && !showAllChats\" \n                    class=\"show-more-button\"\n                    @click=\"showAllChats = true\"\n                  >\n                    Show more\n                  </button>\n                </div>\n                <!-- Add empty state message -->\n                <div v-else class=\"empty-chats-message\">\n                  Your recent chats will appear here.\n                </div>\n              </div>\n\n              <!-- Powered by section -->\n              <div class=\"powered-by-section\">\n                <a href=\"https://sophosic.ai\" \n                   target=\"_blank\" \n                   rel=\"noopener noreferrer\"\n                   class=\"powered-by-link\">\n                  Powered by Sophosic\n                </a>\n                <span class=\"separator\">|</span>\n                <button class=\"system-status-link\" \n                        @click=\"showSystemStatus\">\n                  System Status\n                  <span class=\"status-dot\" :class=\"systemStatus.status.toLowerCase()\"></span>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- System Status Page -->\n          <system-status-page\n            v-else-if=\"showStatusPage\"\n            :services=\"serviceStatus?.services || []\"\n            :overall-status=\"systemStatus\"\n            @back=\"showStatusPage = false; showHomeScreen = true;\"\n          />\n\n          <!-- Active Chat Messages -->\n          <div v-else class=\"conversation-container\">\n            <div class=\"messages-wrapper\">\n              <div v-for=\"(message, idx) in messageList\" \n                   :key=\"idx\" \n                   class=\"message-item\"\n                   :class=\"[\n                     message.author === 'me' ? 'user-message' : 'bot-message',\n                     {\n                       'thread-start': isBotThreadStart(idx),\n                       'has-thread': isBotThreadStart(idx) && hasFollowingBotMessage(idx),\n                       'thread-middle': isBotThreadMiddle(idx),\n                       'thread-end': isBotThreadEnd(idx)\n                     }\n                   ]\">\n                <div class=\"message-content\">\n                  <div v-if=\"message.author !== 'me'\" \n                       class=\"bot-avatar\"\n                       :class=\"{ 'hidden-avatar': isBotThreadMiddle(idx) || isBotThreadEnd(idx) }\">\n                    <span>S</span>\n                    <span class=\"avatar-status-indicator\" \n                          :class=\"systemStatus.status.toLowerCase()\"\n                          :title=\"systemStatus.statusText\">\n                    </span>\n                  </div>\n                  <div class=\"message-bubble\" \n                       v-html=\"renderMarkdown(message.data.text)\">\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- User input slot -->\n        <div v-if=\"!showHomeScreen && !showStatusPage\" \n             class=\"user-input\" \n             :class=\"{ 'keyboard-open': isKeyboardOpen }\"\n             :style=\"{ backgroundColor: currentTheme.input.background }\">\n          <div class=\"input-wrapper\" \n               :class=\"{ 'bot-typing': showTypingIndicator === 'bot' }\"\n               @click=\"() => console.log('Typing status:', showTypingIndicator)\">\n            <input \n              type=\"text\" \n              v-model=\"newMessage\" \n              placeholder=\"Type a message...\" \n              @keyup.enter=\"sendMessage\"\n              @focus=\"handleInputFocus\"\n              @blur=\"handleInputBlur\"\n              :style=\"{ color: currentTheme.input.text }\"\n              :disabled=\"showTypingIndicator === 'bot'\"\n            />\n            <button \n              @click=\"sendMessage\"\n              :class=\"{ 'active': newMessage.trim().length > 0 }\"\n              :disabled=\"showTypingIndicator === 'bot'\"\n            >\n              <svg v-if=\"showTypingIndicator === 'bot'\" viewBox=\"0 0 24 24\"></svg>\n              <svg v-else xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { marked } from 'marked';\nimport ServiceStatus from './ServiceStatus.vue';\nimport SystemStatusPage from './SystemStatusPage.vue';\nimport { defaultTheme } from './theme.js';\nconst API_URL = 'https://n8n.sophosic.ai/webhook/e60704a9-52c1-47eb-9037-2344d6b56c21/chat'\n\n/**\n * @typedef {import('./theme').Theme} Theme\n */\n\nconst logError = (error, context) => {\n  if (process.env.NODE_ENV !== 'production') {\n    console.error(`[ChatWidget] ${context}:`, error);\n  }\n  // Could add proper error tracking service here\n  // e.g., Sentry, LogRocket, etc.\n};\n\nexport default {\n  name: 'ChatWidget',\n  \n  components: {\n    ServiceStatus,\n    SystemStatusPage\n  },\n\n  props: {\n    /** @type {{ type: ObjectConstructor, default: () => Partial<Theme> }} */\n    theme: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n\n  data() {\n    return {\n      sessionId: '',\n      participants: [\n        {\n          id: 'bot',\n          name: 'Sophia',\n          imageUrl: `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 30\">\n              <circle cx=\"15\" cy=\"15\" r=\"15\" fill=\"#5423E7\"/>\n              <text x=\"15\" y=\"20\" \n                font-family=\"Arial, sans-serif\" \n                font-size=\"16\"\n                fill=\"white\" \n                text-anchor=\"middle\"\n                style=\"pointer-events: none;\">S</text>\n            </svg>\n          `)}`\n        }\n      ],\n      apiUrl: API_URL,\n      messageList: [],\n      newMessagesCount: 0,\n      isChatOpen: false,\n      showTypingIndicator: '',\n      newMessage: '',\n      currentTheme: defaultTheme,\n      showHomeScreen: true,\n      previousChats: [], // Array to store previous chat sessions\n      showAllChats: false,\n      systemStatus: {\n        status: 'OK',\n        statusText: 'Operational'\n      },\n      isStatusHovered: false,\n      showStatusPage: false,\n      serviceStatus: null,\n      chatSummary: '',\n      isKeyboardOpen: false,\n      viewportHeight: window.innerHeight,\n      isMobileDevice: false,\n      hidePreview: false,\n    }\n  },\n\n  computed: {\n    displayedChats() {\n      return this.showAllChats \n        ? this.previousChats \n        : this.previousChats.slice(0, 5);\n    },\n    isBotTyping() {\n      return this.showTypingIndicator === 'bot';\n    }\n  },\n\n  created() {\n    // Merge custom theme with default theme\n    this.currentTheme = {\n      ...defaultTheme,\n      ...this.theme\n    }\n\n    // 1) Load session once (sessionId), and load previous chats\n    this.loadSession();\n    this.loadPreviousChats();\n  },\n\n  async mounted() {\n    // Only do the initial API fetch if we *already* have messages\n    if (this.messageList.length > 0) {\n      try {\n        const response = await fetch(API_URL, {\n          method: 'GET',\n          headers: { 'Accept': 'application/json' },\n          credentials: 'omit'\n        });\n        if (!response.ok) throw new Error(`HTTP error: ${response.status}`);\n\n        const rawText = await response.text();\n        console.log('Initial raw response:', rawText);\n\n        const welcomeMessage = this.extractMessage(rawText);\n        if (welcomeMessage && welcomeMessage !== \"I'm here to help! How can I assist you today? (error)\") {\n          this.addMessage({\n            author: 'bot',\n            type: 'text',\n            data: { text: welcomeMessage }\n          });\n        }\n      } catch (error) {\n        console.error('Error loading initial message:', error);\n      }\n    }\n\n    // Initialize serviceStatus when the component is mounted\n    this.$nextTick(() => {\n      if (this.$refs.serviceStatus) {\n        this.serviceStatus = this.$refs.serviceStatus;\n      }\n    });\n\n    // Check if device is mobile\n    this.isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n    \n    // Only add mobile-specific handlers if on mobile\n    if (this.isMobileDevice) {\n      // Add event listeners for viewport changes\n      window.addEventListener('resize', this.handleViewportResize);\n      \n      // Handle iOS viewport changes\n      if ('visualViewport' in window) {\n        window.visualViewport.addEventListener('resize', this.handleViewportResize);\n      }\n\n      // Set custom viewport height property\n      const setVH = () => {\n        const vh = window.innerHeight * 0.01;\n        document.documentElement.style.setProperty('--vh', `${vh}px`);\n      };\n      \n      setVH();\n      window.addEventListener('resize', setVH);\n      \n      // Update viewport height when keyboard appears\n      if ('visualViewport' in window) {\n        window.visualViewport.addEventListener('resize', () => {\n          const viewport = window.visualViewport;\n          document.documentElement.style.setProperty(\n            '--keyboard-height',\n            `${window.innerHeight - viewport.height}px`\n          );\n          this.scrollToBottom();\n        });\n      }\n    }\n  },\n\n  beforeUnmount() {\n    // Clean up event listeners\n    window.removeEventListener('resize', this.handleViewportResize);\n    if ('visualViewport' in window) {\n      window.visualViewport.removeEventListener('resize', this.handleViewportResize);\n    }\n  },\n\n  methods: {\n    loadSession() {\n      // Only load or create sessionId\n      const savedSessionId = localStorage.getItem('chatSessionId');\n      if (savedSessionId) {\n        this.sessionId = savedSessionId;\n      } else {\n        this.createNewSession();\n      }\n    },\n\n    createNewSession() {\n      this.sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n      localStorage.setItem('chatSessionId', this.sessionId);\n    },\n\n    resetSession() {\n      // Use our archive method instead of duplicating logic\n      this.archiveSession();\n\n      // Clear and start fresh\n      this.messageList = [];\n      this.createNewSession();\n\n      this.addMessage({\n        author: 'bot',\n        type: 'text',\n        data: { \n          text: \" Hi! I'm Sophia, an AI agent here with Valley Connection. How can I help you today?\"\n        }\n      });\n    },\n\n    async onMessageWasSent(message) {\n      this.showTypingIndicator = 'bot';\n\n      // Add timestamp to user message\n      this.addMessage({\n        author: 'me',\n        type: 'text',\n        data: { text: message.data.text },\n        timestamp: new Date().toISOString()\n      });\n\n      try {\n        console.log('Sending message:', message.data.text);\n        const requestBody = JSON.stringify({\n          message: message.data.text,\n          type: 'user_message',\n          timestamp: new Date().toISOString(),\n          metadata: {\n            sessionId: this.sessionId\n          }\n        });\n        \n        const response = await fetch(this.apiUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n          },\n          credentials: 'omit',\n          body: requestBody\n        });\n        \n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        \n        const data = await response.json();\n        console.log('Raw response data:', data);\n        \n        // Get the conversation summary from the response array\n        const conversationSummary = Array.isArray(data) \n          ? data.find(item => item.conversationSummary)?.conversationSummary \n          : (data.conversationSummary || 'Chat session');\n        \n        console.log('Extracted conversation summary:', conversationSummary);\n        \n        if (conversationSummary === 'Chat session') {\n          console.warn('No conversation summary found in response:', data);\n        }\n        \n        // Handle the response\n        const botMessage = this.extractMessage(data);\n        \n        // Send first message immediately\n        if (botMessage.messages.length > 0) {\n          const messageToAdd = {\n            author: 'bot',\n            type: 'text',\n            data: { text: botMessage.messages[0] },\n            summary: conversationSummary,\n            timestamp: new Date().toISOString()\n          };\n          console.log('Adding message with summary:', messageToAdd);\n          await this.addMessage(messageToAdd);\n        }\n\n        // Send remaining messages with delays\n        if (botMessage.messages.length > 1) {\n          for (let i = 1; i < botMessage.messages.length; i++) {\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            await this.addMessage({\n              author: 'bot',\n              type: 'text',\n              data: { text: botMessage.messages[i] },\n              summary: conversationSummary,\n              timestamp: new Date().toISOString()\n            });\n          }\n        }\n\n        // Update the chat summary in previousChats\n        const currentChat = this.previousChats.find(chat => chat.sessionId === this.sessionId);\n        if (currentChat) {\n          currentChat.summary = conversationSummary;\n          this.savePreviousChats();\n        }\n\n      } catch (error) {\n        logError(error, 'Message sending failed');\n        this.addMessage({\n          author: 'bot',\n          type: 'text',\n          data: { text: \"I'm sorry, I'm having trouble connecting. Please try again.\" }\n        });\n      } finally {\n        this.showTypingIndicator = '';\n      }\n    },\n\n    extractMessage(data) {\n      try {\n        let messageText = '';\n        \n        if (Array.isArray(data)) {\n          // Find the object with agentResponse in the array\n          const responseObj = data.find(item => item.agentResponse);\n          messageText = responseObj?.agentResponse || \"I'm here to help! How can I assist you today? (error)\";\n        } else if (data.agentResponse) {\n          messageText = data.agentResponse;\n        } else {\n          messageText = \"I'm here to help! How can I assist you today? (error)\";\n        }\n\n        // Split into multiple messages if there are line breaks, but handle double newlines\n        const messages = messageText\n          .split('\\n')\n          .map(msg => msg.trim())\n          .filter(msg => msg.length > 0)\n          // Remove any remaining \\n characters\n          .map(msg => msg.replace(/\\\\n/g, ''));\n\n        return { messages };\n      } catch (error) {\n        console.error('Error extracting message:', error);\n        return { \n          messages: [\"I'm here to help! How can I assist you today? (error)\"]\n        };\n      }\n    },\n\n    addMessage(message) {\n      // Ensure message has a timestamp in local Phoenix time\n      if (!message.timestamp) {\n        const now = new Date();\n        // Convert to Phoenix time by adjusting for UTC-7\n        const phoenixOffset = -7 * 60; // -7 hours in minutes\n        const phoenixTime = new Date(now.getTime() + (now.getTimezoneOffset() + phoenixOffset) * 60000);\n        message.timestamp = phoenixTime.toISOString();\n      }\n      \n      console.log('Adding message:', message);\n      this.messageList = [...this.messageList, message];\n      \n      // Scroll to bottom after adding message\n      this.$nextTick(() => {\n        const container = document.querySelector('.conversation-container');\n        if (container) {\n          container.scrollTop = container.scrollHeight;\n        }\n      });\n      \n      // Archive after each new message\n      this.archiveSession();\n    },\n\n    openChat() {\n      this.isChatOpen = true;\n      this.showHomeScreen = true;\n      this.newMessagesCount = 0;\n      // Load previous chats when opening the widget\n      this.loadPreviousChats();\n    },\n\n    closeChat() {\n      this.archiveSession();\n      this.isChatOpen = false;\n    },\n\n    handleOnType() {\n      console.log('User is typing...')\n    },\n\n    downloadTranscript() {\n      const transcript = this.messageList.map(msg => {\n        const author = msg.author === 'me' ? 'You' : 'Sophia';\n        // Convert stored ISO timestamp to Phoenix local time\n        const timestamp = msg.timestamp ? \n          new Date(msg.timestamp).toLocaleString('en-US', {\n            timeZone: 'America/Phoenix',\n            hour12: true,\n            year: 'numeric',\n            month: '2-digit',\n            day: '2-digit',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit'\n          }) : \n          new Date().toLocaleString('en-US', {timeZone: 'America/Phoenix'});\n        return `${timestamp} - ${author}: ${msg.data.text}`;\n      }).join('\\n\\n');\n\n      // Create the file content with a header\n      const fileContent = `Chat Transcript with Sophia\\n` +\n        `Generated on: ${new Date().toLocaleString()}\\n` +\n        `Session ID: ${this.sessionId}\\n\\n` +\n        `${transcript}`;\n\n      // Create blob and download link\n      const blob = new Blob([fileContent], { type: 'text/plain' });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `chat-transcript-${new Date().toISOString().slice(0,10)}.txt`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n    },\n\n    startNewChat() {\n      this.messageList = [];\n      this.createNewSession();\n      \n      // First add the main welcome message\n      this.addMessage({\n        author: 'bot',\n        type: 'text',\n        data: { \n          text: ` Hi! I'm Sophia, an AI agent here with **Valley Connection AZ**. I can help you with:\n\n- Information about our business networking community\n- Details about our upcoming events and mastermind groups\n- Membership benefits and opportunities\n- Education & training programs like Real Estate Mastery\n- Locations of our meetings in Phoenix, Gilbert, Queen Creek, and other Valley areas\n- How to get involved with our thriving business community`\n        },\n        isWelcomeMessage: true\n      });\n\n      // Add the final question as a threaded message, also marked as welcome\n      this.$nextTick(() => {\n        this.addMessage({\n          author: 'bot',\n          type: 'text',\n          data: { \n            text: 'How can I assist you today?' \n          },\n          isWelcomeMessage: true,\n          isThreaded: true\n        });\n      });\n      \n      // Set showHomeScreen to false after adding the messages\n      this.$nextTick(() => {\n        this.showHomeScreen = false;\n      });\n    },\n\n    goToHome() {\n      this.archiveSession();\n      this.loadPreviousChats();\n      this.messageList = [];\n      this.isChatOpen = true;\n      this.showHomeScreen = true;\n      this.showAllChats = false;\n    },\n\n    loadPreviousChats() {\n      const savedChats = localStorage.getItem('previousChats');\n      if (savedChats) {\n        try {\n          this.previousChats = JSON.parse(savedChats);\n          // Sort chats by last message timestamp, most recent first\n          this.previousChats.sort((a, b) => {\n            const aLastMsg = a.messages[a.messages.length - 1];\n            const bLastMsg = b.messages[b.messages.length - 1];\n            return new Date(bLastMsg?.timestamp || b.timestamp) - \n                   new Date(aLastMsg?.timestamp || a.timestamp);\n          });\n          console.log('Loaded recent conversations:', this.previousChats);\n        } catch (e) {\n          console.error('Error loading recent conversations:', e);\n          this.previousChats = [];\n        }\n      }\n    },\n\n    savePreviousChats() {\n      // Sort by last message timestamp before saving\n      this.previousChats = this.previousChats\n        .sort((a, b) => {\n          const aLastMsg = a.messages[a.messages.length - 1];\n          const bLastMsg = b.messages[b.messages.length - 1];\n          return new Date(bLastMsg?.timestamp || b.timestamp) - \n                 new Date(aLastMsg?.timestamp || a.timestamp);\n        })\n        .slice(0, 10); // Keep only the 10 most recent\n      \n      localStorage.setItem('previousChats', JSON.stringify(this.previousChats));\n      console.log('Saved recent conversations:', this.previousChats);\n    },\n\n    loadChat(chat) {\n      this.showHomeScreen = false;\n      console.log('Loading chat:', chat);\n      this.sessionId = chat.sessionId;\n      this.messageList = [...chat.messages]; // Create a new array to ensure reactivity\n      this.isChatOpen = true;\n      \n      // Scroll to bottom after loading chat\n      this.$nextTick(() => {\n        const container = document.querySelector('.conversation-container');\n        if (container) {\n          container.scrollTop = container.scrollHeight;\n        }\n      });\n    },\n\n    getChatPreview(chat) {\n      // First check if we have a valid summary\n      if (chat.summary && chat.summary !== 'Chat session') {\n        return chat.summary.length > 50 ? chat.summary.substring(0, 50) + '...' : chat.summary;\n      }\n      \n      // If no summary, find the first non-welcome message\n      const firstNonWelcomeMessage = chat.messages.find(msg => !msg.isWelcomeMessage);\n      const previewText = firstNonWelcomeMessage?.data?.text || 'New chat';\n      \n      return previewText.length > 50 ? previewText.substring(0, 50) + '...' : previewText;\n    },\n\n    formatDate(timestamp) {\n      const date = new Date(timestamp);\n      const now = new Date();\n      const diffInMs = now - date;\n      const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24));\n      const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60));\n      const diffInMinutes = Math.floor(diffInMs / (1000 * 60));\n      \n      // Format time\n      const time = date.toLocaleTimeString('en-US', { \n        hour: 'numeric', \n        minute: '2-digit',\n        hour12: true \n      });\n      \n      // If less than 1 minute ago\n      if (diffInMinutes < 1) {\n        return 'Just now';\n      }\n      \n      // If less than 1 hour ago\n      if (diffInHours < 1) {\n        return `${diffInMinutes}m ago`;\n      }\n      \n      // If less than 24 hours ago\n      if (diffInDays < 1) {\n        return `${diffInHours}h ago`;\n      }\n      \n      // If today (after midnight)\n      if (date.toDateString() === now.toDateString()) {\n        return `Today at ${time}`;\n      }\n      \n      // If yesterday\n      const yesterday = new Date(now);\n      yesterday.setDate(yesterday.getDate() - 1);\n      if (date.toDateString() === yesterday.toDateString()) {\n        return `Yesterday at ${time}`;\n      }\n      \n      // If within the last 7 days\n      if (diffInDays < 7) {\n        return date.toLocaleDateString('en-US', { weekday: 'long' });\n      }\n      \n      // If within the current year\n      if (date.getFullYear() === now.getFullYear()) {\n        return date.toLocaleDateString('en-US', { \n          month: 'short', \n          day: 'numeric'\n        });\n      }\n      \n      // If more than a year ago\n      return date.toLocaleDateString('en-US', { \n        month: 'short', \n        day: 'numeric',\n        year: 'numeric'\n      });\n    },\n\n    archiveSession() {\n      if (this.messageList.length > 0) {\n        // Get all bot messages with summaries, excluding welcome messages\n        const botMessages = this.messageList.filter(msg => \n          msg.author === 'bot' && \n          msg.summary && \n          msg.summary !== 'Chat session' &&\n          !msg.isWelcomeMessage\n        );\n        \n        // Get the most recent summary, or fall back to finding a meaningful message\n        let chatSummary = 'Chat session';\n        \n        if (botMessages.length > 0) {\n          // Use the most recent valid summary\n          chatSummary = botMessages[botMessages.length - 1].summary;\n        } else {\n          // Try to find the first non-welcome message as a fallback\n          const firstNonWelcomeMessage = this.messageList.find(msg => !msg.isWelcomeMessage);\n          if (firstNonWelcomeMessage) {\n            chatSummary = firstNonWelcomeMessage.data.text.substring(0, 50);\n          }\n        }\n\n        // Get timestamp from the last message instead of current time\n        const lastMessage = this.messageList[this.messageList.length - 1];\n        const timestamp = lastMessage?.timestamp || new Date().toISOString();\n        \n        // Find existing chat with this sessionId\n        const existingChatIndex = this.previousChats.findIndex(\n          chat => chat.sessionId === this.sessionId\n        );\n        \n        const chatToSave = {\n          sessionId: this.sessionId,\n          messages: this.messageList,\n          timestamp: timestamp, // Use last message timestamp\n          summary: chatSummary\n        };\n\n        // Update or add the chat\n        if (existingChatIndex !== -1) {\n          // Update existing chat\n          this.previousChats[existingChatIndex] = chatToSave;\n        } else {\n          // Add new chat to the beginning\n          this.previousChats = [chatToSave, ...this.previousChats];\n        }\n        \n        this.savePreviousChats();\n        console.log('Archived chat with summary:', chatSummary, 'timestamp:', timestamp);\n      }\n    },\n\n    sendMessage() {\n      if (!this.newMessage.trim()) return;\n      \n      const message = {\n        data: { text: this.newMessage.trim() }\n      };\n      \n      // Clear input\n      this.newMessage = '';\n      \n      // Let onMessageWasSent handle the message addition\n      this.onMessageWasSent(message);\n    },\n\n    renderMarkdown(text) {\n      try {\n        // Clean up the text first\n        const cleanText = text\n          // Replace escaped newlines with actual newlines\n          .replace(/\\\\n/g, '\\n')\n          // Clean up any HTML entities\n          .replace(/&amp;/g, '&')\n          .replace(/&lt;/g, '<')\n          .replace(/&gt;/g, '>')\n          .replace(/&#39;/g, \"'\")\n          .replace(/&quot;/g, '\"')\n          .trim();\n\n        // Configure marked options\n        marked.setOptions({\n          breaks: true,  // Convert \\n to <br>\n          sanitize: false,  // Allow HTML\n          gfm: true,  // GitHub Flavored Markdown\n        });\n        \n        return marked(cleanText);\n      } catch (error) {\n        console.error('Markdown rendering error:', error);\n        return text;  // Fallback to plain text if markdown fails\n      }\n    },\n\n    isBotThreadStart(idx) {\n      return (\n        this.messageList[idx].author !== 'me' && \n        (idx === 0 || this.messageList[idx - 1].author === 'me')\n      );\n    },\n\n    isBotThreadMiddle(idx) {\n      return (\n        this.messageList[idx].author !== 'me' &&\n        idx > 0 &&\n        idx < this.messageList.length - 1 &&\n        this.messageList[idx - 1].author !== 'me' &&\n        this.messageList[idx + 1].author !== 'me'\n      );\n    },\n\n    isBotThreadEnd(idx) {\n      return (\n        this.messageList[idx].author !== 'me' &&\n        (idx === this.messageList.length - 1 || this.messageList[idx + 1].author === 'me') &&\n        idx > 0 &&\n        this.messageList[idx - 1].author !== 'me'\n      );\n    },\n\n    onStatusChanged(status) {\n      this.systemStatus = status;\n    },\n\n    showSystemStatus() {\n      // Get the ServiceStatus component instance\n      this.serviceStatus = this.$refs.serviceStatus;\n      \n      // Only proceed if we have the services data\n      if (this.serviceStatus) {\n        this.showStatusPage = true;\n        this.showHomeScreen = false;\n      } else {\n        console.error('ServiceStatus component not found');\n      }\n    },\n\n    getSummaryText() {\n      if (this.systemStatus.status === 'OK') {\n        return 'All Systems Operational';\n      } else if (this.systemStatus.status === 'WARN') {\n        return 'Degraded Performance';\n      } else if (this.systemStatus.status === 'CRIT') {\n        return 'Service Disruption';\n      }\n      return 'Checking Status...';\n    },\n\n    handleInputFocus() {\n      if (!this.isMobileDevice) return;\n      \n      this.isKeyboardOpen = true;\n      this.$nextTick(() => {\n        // Keep messages in viewport when keyboard opens\n        const messagesWrapper = document.querySelector('.messages-wrapper');\n        if (messagesWrapper) {\n          const messages = messagesWrapper.querySelectorAll('.message-item');\n          if (messages.length <= 3) { // For few messages\n            window.scrollTo(0, 0);\n          } else {\n            const lastMessage = messages[messages.length - 1];\n            lastMessage.scrollIntoView({ behavior: 'smooth' });\n          }\n        }\n      });\n    },\n\n    handleInputBlur() {\n      if (!this.isMobileDevice) return;\n      this.isKeyboardOpen = false;\n    },\n\n    handleViewportResize() {\n      if (!this.isMobileDevice) return;\n      \n      const newHeight = window.visualViewport?.height || window.innerHeight;\n      const keyboardHeight = this.viewportHeight - newHeight;\n      if (newHeight < this.viewportHeight) {\n        this.isKeyboardOpen = true;\n        document.documentElement.style.setProperty('--keyboard-height', `${keyboardHeight}px`);\n        // Adjust scroll position for few messages\n        const messages = document.querySelectorAll('.message-item');\n        if (messages.length <= 3) {\n          window.scrollTo(0, 0);\n        }\n      } else {\n        this.isKeyboardOpen = false;\n        document.documentElement.style.setProperty('--keyboard-height', '0px');\n      }\n      this.viewportHeight = newHeight;\n    },\n\n    scrollToBottom() {\n      this.$nextTick(() => {\n        const container = document.querySelector('.conversation-container');\n        if (container) {\n          container.scrollTop = container.scrollHeight;\n        }\n      });\n    },\n\n    getMostRecentChatPreview() {\n      return this.getMostRecentChatSummary();\n    },\n\n    resumeRecentChat() {\n      if (this.previousChats.length === 0) return;\n      \n      const recentChat = this.previousChats[0];\n      this.loadChat(recentChat);\n      this.isChatOpen = true;\n      this.showHomeScreen = false;\n    },\n\n    getMostRecentChatSummary() {\n      if (this.previousChats.length === 0) return '';\n      const recentChat = this.previousChats[0];\n      \n      // Only return summary if API has provided one\n      if (recentChat.summary) {\n        return recentChat.summary;\n      }\n      return 'New chat'; // Default to \"New chat\" when no summary exists\n    },\n\n    hasFollowingBotMessage(idx) {\n      // Check if the next message exists and is from the bot\n      return idx < this.messageList.length - 1 && this.messageList[idx + 1].author !== 'me';\n    }\n  },\n}\n</script>\n\n<style>\n/* Add these styles to your CSS */\n.chat-window {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  height: -webkit-fill-available;\n  will-change: transform;\n  contain: content;\n}\n\n.chat-window-inner {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: hidden;\n}\n\n.conversation-container {\n  position: relative;\n  flex: 1;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  padding: 16px;\n  min-height: 0;\n  background-color: var(--chat-background);\n  display: flex;\n  flex-direction: column;\n}\n\n.messages-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  margin-top: auto;\n  justify-content: flex-start;\n  contain: layout style;\n}\n\n.chat-container {\n  flex: 1;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n\n.chat-container.keyboard-open {\n  transform: translateY(calc(-1 * var(--keyboard-height, 270px)));\n  transition: transform 0.3s ease;\n  height: calc(100% - var(--keyboard-height, 270px));\n}\n\n.custom-header {\n  position: sticky;\n  top: 0;\n  z-index: 10;\n  background: var(--chat-header-bg);\n  color: var(--chat-header-text);\n}\n\n.user-input {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 10;\n  background: var(--chat-input-bg);\n  padding: 8px;\n  padding-bottom: env(safe-area-inset-bottom, 8px);\n  transition: transform 0.3s ease;\n}\n\n.user-input.keyboard-open {\n  bottom: env(keyboard-inset-height, 0);\n  padding-bottom: env(safe-area-inset-bottom, 8px);\n  transform: translateY(calc(-1 * var(--keyboard-height, 270px)));\n}\n\n@media screen and (max-width: 600px) {\n  .chat-window {\n    height: 100%;\n    height: -webkit-fill-available;\n  }\n  \n  .messages-wrapper {\n    padding-bottom: env(safe-area-inset-bottom, 16px);\n  }\n  \n  .chat-container.keyboard-open .messages-wrapper {\n    transform: translateY(0);\n  }\n  \n  /* Ensure messages stay visible with few messages */\n  .conversation-container:only-child {\n    justify-content: flex-start;\n  }\n}\n\n/* Add viewport height calculation on mount */\n:root {\n  --vh: 1vh;\n\n  /* Theme CSS Variables */\n  --chat-primary: v-bind('currentTheme.primary');\n  --chat-secondary: v-bind('currentTheme.secondary');\n  --chat-background: v-bind('currentTheme.messages.background');\n  \n  /* Header */\n  --chat-header-bg: v-bind('currentTheme.header.background');\n  --chat-header-text: v-bind('currentTheme.header.text');\n  --chat-header-button-bg: v-bind('currentTheme.header.buttons.background');\n  --chat-header-button-hover: v-bind('currentTheme.header.buttons.hover');\n  \n  /* Messages */\n  --chat-message-user-bg: v-bind('currentTheme.messages.user.background');\n  --chat-message-user-text: v-bind('currentTheme.messages.user.text');\n  --chat-message-bot-bg: v-bind('currentTheme.messages.bot.background');\n  --chat-message-bot-text: v-bind('currentTheme.messages.bot.text');\n  --chat-message-timestamp: v-bind('currentTheme.messages.timestamp');\n  \n  /* Input */\n  --chat-input-bg: v-bind('currentTheme.input.background');\n  --chat-input-text: v-bind('currentTheme.input.text');\n  --chat-input-placeholder: v-bind('currentTheme.input.placeholder');\n  --chat-input-border: v-bind('currentTheme.input.border');\n  --chat-input-button-default: v-bind('currentTheme.input.button.default');\n  --chat-input-button-active: v-bind('currentTheme.input.button.active');\n  \n  /* Preview */\n  --chat-preview-bg: v-bind('currentTheme.preview.background');\n  --chat-preview-text: v-bind('currentTheme.preview.text');\n  --chat-preview-timestamp: v-bind('currentTheme.preview.timestamp');\n  --chat-preview-shadow: v-bind('currentTheme.preview.shadow');\n}\n\n/* Markdown styling */\n.message-bubble ul {\n  margin: 0.5em 0;\n  padding-left: 1.5em;\n}\n\n.message-bubble li {\n  margin: 0.25em 0;\n}\n\n.message-bubble p {\n  margin: 0.5em 0;\n}\n\n.message-bubble p:first-child {\n  margin-top: 0;\n}\n\n.message-bubble p:last-child {\n  margin-bottom: 0;\n}\n\n/* Only apply keyboard adjustments on mobile */\n@media screen and (max-width: 600px) {\n  .chat-container.keyboard-open {\n    transform: translateY(calc(-1 * var(--keyboard-height, 270px)));\n    transition: transform 0.3s ease;\n    height: calc(100% - var(--keyboard-height, 270px));\n  }\n\n  .user-input.keyboard-open {\n    bottom: env(keyboard-inset-height, 0);\n    padding-bottom: env(safe-area-inset-bottom, 8px);\n    transform: translateY(calc(-1 * var(--keyboard-height, 270px)));\n  }\n}\n\n/* Desktop specific styles */\n@media screen and (min-width: 601px) {\n  .chat-container {\n    height: 100%;\n  }\n\n  .user-input {\n    position: sticky;\n    bottom: 0;\n    transform: none !important;\n  }\n\n  .messages-wrapper {\n    margin-top: 0;\n  }\n}\n\n/* Add styles for the floating preview */\n.recent-chat-preview {\n  position: absolute !important;\n  bottom: calc(100% + 16px) !important;  /* Position above launcher */\n  right: 0 !important;\n  background: var(--chat-preview-bg) !important;\n  padding: 12px 16px !important;\n  border-radius: 12px !important;\n  box-shadow: 0 4px 12px var(--chat-preview-shadow) !important;\n  width: 280px !important;\n  cursor: pointer !important;\n  transition: all 0.2s ease !important;\n}\n\n.recent-chat-preview-text {\n  font-family: 'Work Sans', sans-serif !important;\n  font-size: 14px !important;\n  color: var(--chat-preview-text) !important;\n  margin: 0 !important;\n  white-space: nowrap !important;\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n}\n\n.recent-chat-preview-time {\n  font-family: 'Work Sans', sans-serif !important;\n  font-size: 12px !important;\n  color: var(--chat-preview-timestamp) !important;\n  margin-top: 4px !important;\n}\n\n/* Message Styles */\n.message-item {\n  display: flex;\n  flex-direction: column;\n}\n\n.message-content {\n  display: flex;\n  gap: 8px;\n  align-items: flex-start;\n}\n\n.user-message .message-bubble {\n  background-color: var(--chat-message-user-bg);\n  color: var(--chat-message-user-text);\n  margin-left: auto;\n}\n\n.bot-message .message-bubble {\n  background-color: var(--chat-message-bot-bg);\n  color: var(--chat-message-bot-text);\n}\n\n.message-bubble {\n  padding: 12px 16px;\n  border-radius: 12px;\n  max-width: 80%;\n  word-break: break-word;\n}\n\n/* Input Styling */\n.input-wrapper {\n  display: flex;\n  gap: 8px;\n  padding: 8px;\n  border: 1px solid var(--chat-input-border);\n  border-radius: 8px;\n  background: var(--chat-input-bg);\n}\n\n.input-wrapper input {\n  flex: 1;\n  border: none;\n  outline: none;\n  background: transparent;\n  color: var(--chat-input-text);\n}\n\n.input-wrapper input::placeholder {\n  color: var(--chat-input-placeholder);\n}\n\n.input-wrapper button {\n  padding: 8px;\n  border: none;\n  background: transparent;\n  color: var(--chat-input-button-default);\n  cursor: pointer;\n  transition: color 0.2s ease;\n}\n\n.input-wrapper button.active {\n  color: var(--chat-input-button-active);\n}\n\n/* Header Button Styling */\n.custom-header button {\n  padding: 8px;\n  border: none;\n  border-radius: 4px;\n  background: var(--chat-header-button-bg);\n  color: var(--chat-header-text);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.custom-header button:hover {\n  background: var(--chat-header-button-hover);\n}\n</style>","<template>\n  <div v-if=\"overallStatus.status !== 'OK'\" class=\"service-status\">\n    <!-- Collapsible header -->\n    <div class=\"status-header\" @click=\"isExpanded = !isExpanded\">\n      <div class=\"status-summary\">\n        <span class=\"dot\" :class=\"overallStatus.status.toLowerCase()\"></span>\n        <h3 class=\"status-title\">\n          {{ isExpanded ? 'Service Status' : getSummaryText() }}\n        </h3>\n      </div>\n      <button class=\"expand-button\" :class=\"{ 'is-expanded': isExpanded }\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <polyline points=\"6 9 12 15 18 9\"></polyline>\n        </svg>\n      </button>\n    </div>\n\n    <!-- Expandable content -->\n    <div class=\"status-grid\" v-show=\"isExpanded\">\n      <div v-for=\"service in services\" \n           :key=\"service.name\" \n           class=\"status-item\">\n        <div class=\"status-icon\">\n          <span class=\"dot\" :class=\"service.status.toLowerCase()\"></span>\n        </div>\n        <div class=\"status-details\">\n          <span class=\"service-name\">\n            {{ service.name }}\n            <a :href=\"service.statusPageUrl\" \n               target=\"_blank\" \n               rel=\"noopener noreferrer\" \n               class=\"status-link\"\n               title=\"View detailed status\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path>\n                <polyline points=\"15 3 21 3 21 9\"></polyline>\n                <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line>\n              </svg>\n            </a>\n          </span>\n          <span class=\"status-text\">{{ service.statusText }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ServiceStatus',\n  data() {\n    return {\n      isExpanded: false,\n      services: [\n        {\n          name: 'Primary AI Agent',\n          status: 'OK',\n          statusText: 'Operational',\n          endpoint: 'https://api.anthropic.com/v1/messages',\n          model: 'claude-3-5-sonnet-20241022',\n          statusPageUrl: 'https://status.anthropic.com/'\n        },\n        {\n          name: 'Knowledge Base',\n          status: 'OK',\n          statusText: 'Operational',\n          components: [\n            {\n              name: 'Vector Database',\n              endpoint: 'https://api.pinecone.io',\n              namespace: 'company-knowledgebase',\n              statusPageUrl: 'https://status.pinecone.io/'\n            },\n            {\n              name: 'Embeddings Service',\n              endpoint: 'https://api.openai.com/v1/embeddings',\n              model: 'text-embedding-ada-002',\n              statusPageUrl: 'https://status.openai.com/'\n            },\n            {\n              name: 'LLM Processing',\n              endpoint: 'https://api.groq.com/v1/chat/completions',\n              model: 'llama-3.3-70b-versatile',\n              statusPageUrl: 'https://groqstatus.com/',\n              details: {\n                contextLength: '128k',\n                speed: '276 tokens/sec',\n                pricing: {\n                  input: '$0.59/M tokens',\n                  output: '$0.79/M tokens'\n                }\n              }\n            }\n          ],\n          statusPageUrl: 'https://status.pinecone.io/'\n        },\n        {\n          name: 'Sophosic Backend',\n          status: 'OK',\n          statusText: 'Operational',\n          endpoint: 'https://n8n.sophosic.ai',\n          statusPageUrl: 'https://status.render.com/'\n        }\n      ],\n      checkInterval: null\n    }\n  },\n  methods: {\n    async checkServiceStatus(service) {\n      try {\n        if (service.name === 'Knowledge Base') {\n          // Check all components of the Knowledge Base\n          let componentStatuses = await Promise.all(service.components.map(async (component) => {\n            let statusUrl;\n            let status = 'OK';\n            let statusText = 'Operational';\n\n            switch(component.name) {\n              case 'Vector Database':\n                statusUrl = 'https://status.pinecone.io/api/v2/status.json';\n                break;\n              case 'Embeddings Service':\n                statusUrl = 'https://status.openai.com/api/v2/status.json';\n                break;\n              case 'LLM Processing':\n                statusUrl = 'https://groqstatus.com/api/v2/status.json';\n                break;\n            }\n\n            try {\n              const response = await fetch(statusUrl);\n              const data = await response.json();\n              \n              if (data.status.indicator === 'none') {\n                status = 'OK';\n                statusText = 'Operational';\n              } else if (data.status.indicator === 'minor') {\n                status = 'WARN';\n                statusText = 'Degraded Performance';\n              } else {\n                status = 'CRIT';\n                statusText = 'Service Disruption';\n              }\n            } catch (error) {\n              console.error(`Error checking ${component.name} status:`, error);\n              status = 'WARN';\n              statusText = 'Status Unknown';\n            }\n\n            return { status, statusText };\n          }));\n\n          // Determine overall Knowledge Base status\n          if (componentStatuses.some(s => s.status === 'CRIT')) {\n            service.status = 'CRIT';\n            service.statusText = 'Service Disruption';\n          } else if (componentStatuses.some(s => s.status === 'WARN')) {\n            service.status = 'WARN';\n            service.statusText = 'Degraded Performance';\n          } else if (componentStatuses.every(s => s.status === 'OK')) {\n            service.status = 'OK';\n            service.statusText = 'Operational';\n          } else {\n            service.status = 'WARN';\n            service.statusText = 'Partially Operational';\n          }\n        } else {\n          // Handle other services as before\n          let statusUrl;\n          switch(service.name) {\n            case 'Primary AI Agent':\n              statusUrl = 'https://status.anthropic.com/api/v2/status.json';\n              break;\n            case 'Sophosic Backend':\n              statusUrl = 'https://status.render.com/api/v2/status.json';\n              break;\n          }\n\n          if (statusUrl) {\n            const response = await fetch(statusUrl);\n            const data = await response.json();\n            this.updateServiceStatus(service, data);\n          }\n        }\n      } catch (error) {\n        console.error(`Error checking ${service.name} status:`, error);\n        service.status = 'WARN';\n        service.statusText = 'Status Unknown';\n      }\n    },\n\n    updateServiceStatus(service, data) {\n      if (data.status.indicator === 'none') {\n        service.status = 'OK';\n        service.statusText = 'Operational';\n      } else if (data.status.indicator === 'minor') {\n        service.status = 'WARN';\n        service.statusText = 'Degraded Performance';\n      } else {\n        service.status = 'CRIT';\n        service.statusText = 'Service Disruption';\n      }\n    },\n    \n    async checkAllServices() {\n      for (const service of this.services) {\n        await this.checkServiceStatus(service);\n      }\n    },\n\n    getSummaryText() {\n      if (this.overallStatus.status === 'OK') {\n        return 'All Systems Operational';\n      } else if (this.overallStatus.status === 'WARN') {\n        return 'Degraded Performance';\n      } else if (this.overallStatus.status === 'CRIT') {\n        return 'Service Disruption';\n      }\n      return 'Checking System Status...';\n    }\n  },\n  mounted() {\n    // Check status immediately\n    this.checkAllServices();\n    \n    // Then check every 5 minutes\n    this.checkInterval = setInterval(() => {\n      this.checkAllServices();\n    }, 5 * 60 * 1000);\n  },\n  beforeUnmount() {\n    if (this.checkInterval) {\n      clearInterval(this.checkInterval);\n    }\n  },\n  computed: {\n    overallStatus() {\n      // If any service is CRIT, overall status is CRIT\n      if (this.services.some(service => service.status === 'CRIT')) {\n        return {\n          status: 'CRIT',\n          statusText: 'Service Disruption'\n        };\n      }\n      // If any service is WARN, overall status is WARN\n      if (this.services.some(service => service.status === 'WARN')) {\n        return {\n          status: 'WARN',\n          statusText: 'Degraded Performance'\n        };\n      }\n      // If all services are OK, overall status is OK\n      if (this.services.every(service => service.status === 'OK')) {\n        return {\n          status: 'OK',\n          statusText: 'Operational'\n        };\n      }\n      // Default status if any service is unknown\n      return {\n        status: 'WARN',\n        statusText: 'Partially Operational'\n      };\n    }\n  },\n  watch: {\n    overallStatus: {\n      handler(newStatus) {\n        this.$emit('status-changed', newStatus);\n      },\n      deep: true\n    }\n  }\n}\n</script>","import { render } from \"./ServiceStatus.vue?vue&type=template&id=03185770\"\nimport script from \"./ServiceStatus.vue?vue&type=script&lang=js\"\nexport * from \"./ServiceStatus.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"chat-container\">\n    <div class=\"system-status-content\">\n      <div class=\"status-card\">\n        <div class=\"overall-status\" :class=\"overallStatus.status.toLowerCase()\">\n          <span class=\"dot\" :class=\"overallStatus.status.toLowerCase()\"></span>\n          <h2>{{ getSummaryText() }}</h2>\n        </div>\n\n        <div class=\"services-grid\">\n          <div v-for=\"service in services\" \n               :key=\"service.name\" \n               class=\"status-item\">\n            <div class=\"status-icon\">\n              <span class=\"dot\" :class=\"service.status.toLowerCase()\"></span>\n            </div>\n            <div class=\"status-details\">\n              <div class=\"service-header\">\n                <div class=\"service-title\">\n                  <span class=\"service-name\">{{ service.name }}</span>\n                </div>\n                <button v-if=\"service.components\"\n                        class=\"status-link expand-button\"\n                        :class=\"{ 'is-expanded': expandedServices[service.name] }\"\n                        @click=\"toggleService(service.name)\"\n                        title=\"View components\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <polyline points=\"6 9 12 15 18 9\"></polyline>\n                  </svg>\n                </button>\n                <a v-else \n                   :href=\"service.statusPageUrl\" \n                   target=\"_blank\" \n                   rel=\"noopener noreferrer\" \n                   class=\"status-link\"\n                   title=\"View detailed status\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path>\n                    <polyline points=\"15 3 21 3 21 9\"></polyline>\n                    <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line>\n                  </svg>\n                </a>\n              </div>\n              <span class=\"status-text\">{{ service.statusText }}</span>\n              \n              <div v-if=\"service.components\" \n                   class=\"service-components\"\n                   :class=\"{ 'expanded': expandedServices[service.name] }\">\n                <div v-for=\"component in service.components\" \n                     :key=\"component.name\"\n                     class=\"component-item\">\n                  <div class=\"component-header\">\n                    <span class=\"component-name\">{{ component.name }}</span>\n                    <a :href=\"component.statusPageUrl\"\n                       target=\"_blank\"\n                       rel=\"noopener noreferrer\"\n                       class=\"status-link\"\n                       title=\"View provider status\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                        <path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path>\n                        <polyline points=\"15 3 21 3 21 9\"></polyline>\n                        <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line>\n                      </svg>\n                    </a>\n                  </div>\n                  <div class=\"component-details\">\n                    <span class=\"component-model\">{{ component.model || component.namespace }}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"powered-by-section\">\n        <a href=\"https://sophosic.ai\" \n           target=\"_blank\" \n           rel=\"noopener noreferrer\"\n           class=\"powered-by-link\">\n          Powered by Sophosic\n        </a>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SystemStatusPage',\n  props: {\n    services: {\n      type: Array,\n      required: true\n    },\n    overallStatus: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      expandedServices: {}\n    }\n  },\n  methods: {\n    getSummaryText() {\n      if (this.overallStatus.status === 'OK') {\n        return 'All Systems Operational';\n      } else if (this.overallStatus.status === 'WARN') {\n        return 'Degraded Performance';\n      } else if (this.overallStatus.status === 'CRIT') {\n        return 'Service Disruption';\n      }\n      return 'Checking System Status...';\n    },\n    toggleService(serviceName) {\n      this.expandedServices[serviceName] = !this.expandedServices[serviceName];\n      this.$forceUpdate(); // Ensure reactivity\n    }\n  }\n}\n</script>\n\n<style scoped>\n.chat-container {\n  flex: 1;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n}\n\n.system-status-content {\n  flex: 1;\n  padding: 24px;\n  padding-bottom: 0;\n  background: #F8F9FE;\n  display: flex;\n  flex-direction: column;\n}\n\n.status-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  margin-bottom: auto;\n}\n\n.services-grid {\n  padding: 16px;\n}\n\n.powered-by-section {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 16px;\n}\n\n.powered-by-link {\n  color: #666666;\n  text-decoration: none;\n  font-family: 'Work Sans', sans-serif;\n  font-size: 14px;\n  transition: color 0.2s ease;\n}\n\n.powered-by-link:hover {\n  color: #5423E7;\n}\n\n.services-grid {\n  padding: 16px;\n}\n\n.status-item {\n  display: flex;\n  align-items: flex-start;\n  padding: 16px;\n  border-radius: 8px;\n  transition: background-color 0.2s ease;\n}\n\n.status-item:hover {\n  background-color: #F3F4F6;\n}\n\n.status-icon {\n  margin-right: 12px;\n  padding-top: 4px;\n}\n\n.status-details {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.service-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 8px;\n}\n\n.service-name {\n  font-size: 16px;\n  font-weight: 500;\n  color: #1E1B3C;\n}\n\n.status-details .status-text {\n  font-size: 14px;\n  color: #6B7280;\n  opacity: 1;\n  transform: none;\n  white-space: normal;\n  display: block;\n  margin-top: 2px;\n}\n\n.status-link {\n  display: inline-flex;\n  align-items: center;\n  color: #1E1B3C;\n  opacity: 0.4;\n  transition: opacity 0.2s ease;\n}\n\n.status-link:hover {\n  opacity: 0.8;\n}\n\n.dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  display: inline-block;\n}\n\n.dot.ok {\n  background-color: #10B981;\n}\n\n.dot.warn {\n  background-color: #F59E0B;\n}\n\n.dot.crit {\n  background-color: #EF4444;\n}\n\n.overall-status {\n  padding: 24px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n}\n\n.overall-status h2 {\n  font-size: 18px;\n  font-weight: 600;\n  margin: 0;\n  color: #1E1B3C;\n}\n\n.service-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n}\n\n.expand-button {\n  background: none;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  color: #1E1B3C;\n  opacity: 0.4;\n  transition: all 0.2s ease;\n}\n\n.expand-button:hover {\n  opacity: 0.8;\n}\n\n.expand-button.is-expanded svg {\n  transform: rotate(180deg);\n}\n\n.service-components {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.3s ease-out;\n  margin-top: 0;\n}\n\n.service-components.expanded {\n  max-height: 500px; /* Adjust based on expected content height */\n  margin-top: 12px;\n}\n\n.component-item {\n  padding: 8px 12px;\n  margin-left: 8px;\n  border-left: 1px solid #E5E7EB;\n  font-size: 14px;\n}\n\n.component-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.component-name {\n  color: #4B5563;\n  font-weight: 500;\n}\n\n.component-details {\n  margin-top: 2px;\n}\n\n.component-model {\n  color: #6B7280;\n  font-size: 12px;\n}\n\n/* Ensure smooth transitions */\n.expand-button svg {\n  transition: transform 0.2s ease;\n}\n</style>\n","import { render } from \"./SystemStatusPage.vue?vue&type=template&id=3826e6aa&scoped=true\"\nimport script from \"./SystemStatusPage.vue?vue&type=script&lang=js\"\nexport * from \"./SystemStatusPage.vue?vue&type=script&lang=js\"\n\nimport \"./SystemStatusPage.vue?vue&type=style&index=0&id=3826e6aa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3826e6aa\"]])\n\nexport default __exports__","// Base color palette\nconst colors = {\n  primary: '#5423E7',\n  secondary: '#1E1B3C',\n  background: '#F8F9FE',\n  white: '#FFFFFF',\n  gray: {\n    100: '#F8F9FE',\n    200: '#EEF0F6',\n    300: '#E2E4ED',\n    400: '#9CA3AF',\n    500: '#6B7280',\n    600: '#4B5563',\n    700: '#374151',\n    800: '#1E1B3C',\n  },\n  status: {\n    success: '#10B981',\n    warning: '#F59E0B', \n    error: '#EF4444',\n  }\n}\n\n// Theme configuration\nexport const defaultTheme = {\n  header: {\n    background: colors.secondary,\n    text: colors.white,\n    icons: colors.white,\n    buttons: {\n      background: 'rgba(255, 255, 255, 0.1)',\n      hover: 'rgba(255, 255, 255, 0.2)',\n    }\n  },\n  launcher: {\n    background: colors.primary,\n    shadow: 'rgba(84, 35, 231, 0.1)',\n  },\n  messages: {\n    background: colors.background,\n    user: {\n      background: colors.primary,\n      text: colors.white,\n    },\n    bot: {\n      background: colors.white,\n      text: colors.secondary,\n    },\n    timestamp: colors.gray[500],\n  },\n  input: {\n    background: colors.background,\n    text: colors.secondary,\n    placeholder: colors.gray[500],\n    border: colors.gray[300],\n    button: {\n      default: colors.gray[400],\n      active: colors.primary,\n    }\n  },\n  preview: {\n    background: colors.white,\n    text: colors.secondary,\n    timestamp: colors.gray[500],\n    shadow: 'rgba(0, 0, 0, 0.1)',\n  },\n  status: {\n    ok: colors.status.success,\n    warn: colors.status.warning,\n    crit: colors.status.error,\n  }\n}\n\n// Helper to merge custom theme with default theme\nexport function createTheme(customTheme) {\n  return {\n    ...defaultTheme,\n    ...customTheme,\n  }\n} ","import { render } from \"./ChatWidget.vue?vue&type=template&id=727a6102\"\nimport script from \"./ChatWidget.vue?vue&type=script&lang=js\"\nexport * from \"./ChatWidget.vue?vue&type=script&lang=js\"\n\nimport \"./ChatWidget.vue?vue&type=style&index=0&id=727a6102&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=bf427bc6\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=63c055be\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=63c055be&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nconst app = createApp(App)\napp.mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.j = 524;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = Object(typeof self !== 'undefined' ? self : this)[\"webpackChunkSophosicChat\"] = Object(typeof self !== 'undefined' ? self : this)[\"webpackChunkSophosicChat\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(6138)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["root","factory","exports","module","define","amd","self","this","id","_createElementBlock","_Fragment","_createElementVNode","name","content","_hoisted_1","_createVNode","_component_chat_widget","class","key","viewBox","xmlns","width","height","fill","stroke","_normalizeClass","$data","isChatOpen","style","_normalizeStyle","backgroundColor","currentTheme","messages","background","_hoisted_4","header","color","text","_hoisted_5","showHomeScreen","_createCommentVNode","onClick","_cache","$event","showStatusPage","messageList","length","$options","goToHome","title","type","d","_hoisted_6","_hoisted_7","_toDisplayString","showSystemStatus","apply","arguments","systemStatus","status","toLowerCase","_hoisted_8","downloadTranscript","points","x1","y1","x2","y2","resetSession","closeChat","isKeyboardOpen","_hoisted_9","_hoisted_10","startNewChat","_createTextVNode","_component_service_status","ref","onStatusChanged","_hoisted_11","previousChats","_hoisted_12","_renderList","displayedChats","chat","sessionId","loadChat","_hoisted_14","_hoisted_15","getChatPreview","_hoisted_16","formatDate","timestamp","_hoisted_13","showAllChats","_hoisted_17","_hoisted_18","href","target","rel","_createBlock","_component_system_status_page","services","_$data$serviceStatus","serviceStatus","onBack","_hoisted_19","_hoisted_20","message","idx","author","isBotThreadStart","hasFollowingBotMessage","isBotThreadMiddle","isBotThreadEnd","_hoisted_21","statusText","_hoisted_22","innerHTML","renderMarkdown","data","_hoisted_23","input","showTypingIndicator","console","log","newMessage","placeholder","onKeyup","_withKeys","sendMessage","onFocus","handleInputFocus","onBlur","handleInputBlur","disabled","_hoisted_24","trim","_hoisted_26","_hoisted_27","_hoisted_25","openChat","getMostRecentChatSummary","hidePreview","_withModifiers","resumeRecentChat","_hoisted_2","_hoisted_3","_$data$previousChats$","concat","launcher","boxShadow","shadow","overallStatus","isExpanded","getSummaryText","service","statusPageUrl","endpoint","model","components","namespace","details","contextLength","speed","pricing","output","checkInterval","methods","checkServiceStatus","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","componentStatuses","statusUrl","response","wrap","_context2","prev","next","Promise","all","map","_ref","_callee","component","_context","t0","abrupt","fetch","sent","json","indicator","t1","error","stop","_x","some","s","every","updateServiceStatus","checkAllServices","_this2","_callee3","_iterator","_step","_context3","_createForOfIteratorHelper","n","done","value","e","f","finish","mounted","_this3","setInterval","beforeUnmount","clearInterval","computed","watch","handler","newStatus","$emit","deep","__exports__","$props","expandedServices","toggleService","props","Array","required","Object","serviceName","$forceUpdate","colors","primary","secondary","white","gray","success","warning","defaultTheme","icons","buttons","hover","user","bot","border","button","default","active","preview","ok","warn","crit","API_URL","logError","context","process","__default__","ServiceStatus","SystemStatusPage","theme","participants","imageUrl","encodeURIComponent","apiUrl","newMessagesCount","isStatusHovered","chatSummary","viewportHeight","window","innerHeight","isMobileDevice","slice","isBotTyping","created","_objectSpread","loadSession","loadPreviousChats","rawText","welcomeMessage","setVH","method","headers","credentials","Error","extractMessage","addMessage","$nextTick","$refs","test","navigator","userAgent","addEventListener","handleViewportResize","visualViewport","vh","document","documentElement","setProperty","viewport","scrollToBottom","removeEventListener","savedSessionId","localStorage","getItem","createNewSession","Date","now","Math","random","toString","substr","setItem","archiveSession","onMessageWasSent","_data$find","requestBody","conversationSummary","botMessage","messageToAdd","i","currentChat","toISOString","JSON","stringify","metadata","body","isArray","find","item","summary","resolve","setTimeout","savePreviousChats","messageText","responseObj","agentResponse","split","msg","filter","replace","phoenixOffset","phoenixTime","getTime","getTimezoneOffset","_toConsumableArray","container","querySelector","scrollTop","scrollHeight","handleOnType","transcript","toLocaleString","timeZone","hour12","year","month","day","hour","minute","second","join","fileContent","blob","Blob","url","URL","createObjectURL","a","createElement","download","appendChild","click","revokeObjectURL","removeChild","isWelcomeMessage","isThreaded","savedChats","parse","sort","b","aLastMsg","bLastMsg","_firstNonWelcomeMessa","substring","firstNonWelcomeMessage","previewText","date","diffInMs","diffInDays","floor","diffInHours","diffInMinutes","time","toLocaleTimeString","toDateString","yesterday","setDate","getDate","toLocaleDateString","weekday","getFullYear","_this4","botMessages","lastMessage","existingChatIndex","findIndex","chatToSave","cleanText","marked","setOptions","breaks","sanitize","gfm","messagesWrapper","querySelectorAll","scrollTo","scrollIntoView","behavior","_window$visualViewpor","newHeight","keyboardHeight","getMostRecentChatPreview","recentChat","extends","ChatWidget","initializeChat","render","app","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","splice","r","getter","__esModule","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}